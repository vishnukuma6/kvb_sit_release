{% extends 'Shared/mainLayout.html' %}
{% load static from staticfiles %}
{% block title %} Add Agreement  {% endblock %}
{% block content %}
{% csrf_token %}
{% verbatim %}
<div class="maincontent">
    <div ng-app="App_maker_summary" ng-controller="Ctrl_amc_maker" class="container container1">
        <div class="row">
            <div class="row-header col-lg-12 col-sm-12">
                <h4>Agreement for {{Premises_Property_Name}} Property </h4>
            </div>
        </div>
        <br/>
        <form name="landlord_form" novalidate>
            <div class="row">
                <div class="col-md-12">
                    <md-subheader class="md-accent">Agreement Terms</md-subheader>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="col-md-3">
                        <md-input-container class="md-block inputcontainer">
                            <label>Start Date</label>
                            <md-datepicker md-hide-icons="calendar"
                                           ng-model="all_data.Start_date"
                                           md-hide-icons="calendar" ng-click="date" md-min-date="maxDate"
                                           md-max-date="minDate" required></md-datepicker>
                        </md-input-container>
                    </div>
                    <div class="col-md-3">
                        <md-input-container class="md-block inputcontainer">
                            <label>End Date</label>
                            <md-datepicker md-hide-icons="calendar"
                                           ng-model="all_data.End_date"
                                           md-hide-icons="calendar" ng-click="date" md-min-date="maxDate"
                                           md-max-date="minDate" required></md-datepicker>
                        </md-input-container>
                    </div>
                    <div class="col-md-3">
                        <md-input-container class="md-block inputcontainer">
                            <label>Lease period</label>
                            <input ng-model="all_data.lease_period"
                                   numbers-only
                                   placeholder=" Lease period in Months"
                                   maxlength="255" required/>
                        </md-input-container>
                    </div>
                    <div class="col-md-3">
                        <md-input-container class="md-block inputcontainer">
                            <label>Lease Enhancement Terms</label>
                            <input ng-model="all_data.Enhancement_term"
                                   numbers-only
                                   placeholder="Lease Enhancement Terms in Months"
                                   maxlength="255" required/>
                        </md-input-container>
                    </div>
                </div>
                <div class="col-md-12">
                    <div class="col-md-3">
                        <md-input-container class="md-block inputcontainer">
                            <label>Lease Registration</label>
                            <md-select md-container-class="popup_select"
                                       ng-change=""
                                       ng-required="true"
                                       ng-model="all_data.reg_no">
                                <md-option ng-repeat="y in lease_registration"
                                           ng-click="y.dropdowndetails_name =='registered' ? registration_change(1) : registration_change(0) "
                                           ng-value="y.dropdowndetails_gid">
                                    {{y.dropdowndetails_name}}
                                </md-option>
                            </md-select>
                        </md-input-container>
                    </div>
                    <div class="col-md-3">
                        <md-input-container class="md-block inputcontainer">
                            <label>Registration Date</label>
                            <md-datepicker md-hide-icons="calendar"
                                           ng-model="all_data.Registration_date"
                                           ng-disabled="reg_data"
                                           md-hide-icons="calendar"
                                           ng-click="date" md-min-date="maxDate"
                                           md-max-date="minDate"></md-datepicker>
                        </md-input-container>
                    </div>
                    <div class="col-md-3">
                        <md-autocomplete md-clear-button="true"
                                         md-floating-label="Lease Charge Paid By"
                                         md-item-text="item8.dropdowndetails_name"
                                         md-items="item8 in agree_leasechrg(search_leasechrg)"
                                         md-menu-class="md-virtual-repeat-container"
                                         md-min-length=0
                                         md-no-cache="true"
                                         ng-disabled="reg_data"
                                         md-search-text="search_leasechrg"
                                         md-selected-item="all_data.leasechrg"
                                         md-selected-item-change="agree_leasechrg_changed(item8.dropdowndetails_gid)">
                            <md-item-template>
                                <span md-highlight-text="search_leasechrg"> {{item8.dropdowndetails_name}}</span>
                            </md-item-template>
                            <md-not-found>
                                No DATA matching "{{search_leasechrg}}" were found.
                            </md-not-found>
                        </md-autocomplete>
                    </div>
                    <!--                    <div class="col-md-3">-->
                    <!--                        <md-input-container class="md-block inputcontainer">-->
                    <!--                            <label>Registration Charges borne by </label>-->
                    <!--                            <input ng-model="all_data.borne_by"-->
                    <!--                                   numbers-only-->
                    <!--                                   maxlength="255"/>-->
                    <!--                        </md-input-container>-->
                    <!--                    </div>-->
                    <div class="col-md-3">
                        <md-input-container class="md-block inputcontainer">
                            <label>Relaxation Period</label>

                            <input ng-model="all_data.relax_period"
                                   numbers-only
                                   placeholder="Relaxation Period in Months"
                                   maxlength="255" required/>
                        </md-input-container>
                    </div>

                </div>
                <div class="col-md-12">
                    <div class="col-md-3">
                        <md-input-container class="md-block inputcontainer">
                            <label>Rent Adjustment Clause</label>
                            <input ng-model="all_data.rent_adjst"
                                   numbers-only
                                   maxlength="255" required/>
                        </md-input-container>
                    </div>
                    <div class="col-md-3">
                        <md-input-container class="md-block inputcontainer">
                            <label>Vacation Terms</label>
                            <input ng-model="all_data.vacationterm"
                                   numbers-only
                                   placeholder="Vacation Terms in Months"
                                   maxlength="255" required/>
                        </md-input-container>
                    </div>
                    <div class="col-md-3">
                        <md-input-container class="md-block inputcontainer">
                            <label>Vacation Notice Period</label>
                            <input ng-model="all_data.noticeperiod"
                                   numbers-only
                                   placeholder="Vacation Notice Period in Months"
                                   maxlength="255" required/>
                        </md-input-container>
                    </div>

                    <div class="col-md-3">
                        <md-input-container class="md-block inputcontainer">
                            <label>Lock in Period </label>
                            <input ng-model="all_data.lockin"
                                   numbers-only
                                   placeholder="Lock in Period in Months"
                                   maxlength="255" required/>
                        </md-input-container>
                    </div>


                </div>
                <div class="row">
                    <div class="col-md-5"></div>
                    <div class="col-md-4">
                        <md-button class="md-raised custbutton" value="submit"
                                   ng-disabled="landlord_form.$invalid"
                                   ng-hide="agreement_edit=='Y' || Page_Name=='Premises_Approval_Summary'"
                                   ng-click="save_data('AGREEMENT','NEW')">
                            Save
                        </md-button>

                        <md-button class="md-raised" value="submit"
                                   ng-disabled="landlord_form.$invalid"
                                   ng-hide="agreement_edit=='N' || Page_Name=='Premises_Approval_Summary'"
                                   ng-click="save_data('AGREEMENT','UPDATE')">
                            Update
                        </md-button>

                        <a href="BranchExp/Br_Premises_Property_Details">
                            <md-button class="md-raised md-warn" value="close" data-dismiss="modal"
                                       aria-label="Close">Cancel
                            </md-button>
                        </a>
                    </div>
                </div>
                <div class="col-md-12">
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <md-subheader class="md-accent">Agreement Details</md-subheader>
                </div>
            </div>
            <br/>
            <div class="row table-responsive">
                <div class="col-md-12 col-lg-12 col-sm-12">
                    <table class="table table-striped table-bordered table-condensed table-hover md-primary"
                           md-progress="deferred">
                        <thead class="header">
                        <tr style="text-align:center">
                            <th>S.no</th>
                            <th>Start Date</th>
                            <th>End Date</th>
                            <th>Lease period</th>
                            <th>Edit Agreement</th>
                            <th>Add Rent</th>

                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="qs in Agreementdata.slice(((currentPage-1)*itemsPerPage),((currentPage)*itemsPerPage)) | filter:search:strict">
                            <td class="text-center">
                                {{((currentPage-1)*itemsPerPage)+$index+1}}
                            </td>
                            <td align="center">
                                {{qs.startdate | date:'dd-MMM-yyyy'}}
                            </td>
                            <td align="center"> {{qs.leasevalid | date:'dd-MMM-yyyy'}}</td>
                            <td align="center">
                                {{qs.agreement_leaseperiod}}
                            </td>
                            <td align="center">
                                <a>
                                    <span class="material-icons"
                                          ng-click="edit_agreement(qs)">edit
                                    </span>
                                </a>
                            </td>
                            <td align="center">
                                    <span class="editlink material-icons"
                                          ng-click="add_rent(qs)">arrow_upward
                                     </span>
                            </td>
                        </tr>
                        <tr ng-show="Agreementdata.length == 0">
                            <td class="warning" colspan="11">
                                No Records Found.
                            </td>
                        </tr>
                        </tbody>
                        <tfoot>
                        <tr>
                            <td colspan="4" align="center">
                                <ul uib-pagination total-items="Agreementdata.length"
                                    ng-model="currentPage"
                                    max-size="maxSize" class="pagination-sm"
                                    boundary-links="true"
                                    items-per-page="itemsPerPage"></ul>
                            </td>
                            <td colspan="2" style="padding: 34px">
                                <strong>Total Count:{{Agreementdata.length}}</strong>
                            </td>
                        </tr>
                        </tfoot>
                        </tbody>
                    </table>
                </div>
            </div>

        </form>
        <div class="modal fade" id="rent_popup" tabindex="-1" role="dialog" data-backdrop="static"
             data-keyboard="false"
             aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document" style="width:90%">
                <div class="modal-content">
                    <div class="modal-header popup-header">
                        <h5 class="modal-title" id="exampleModalLabels2">
                            ADD RENT
                            <button type="button" class="close" data-dismiss="modal"
                                    ng-click=""
                                    aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </h5>
                    </div>
                    <div class="body">
                        <br/>
                        <form name="rent_form" novalidate>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="col-md-3">
                                        <md-autocomplete md-clear-button="true"
                                                         md-floating-label="Rent Type"
                                                         md-item-text="itemr.dropdowndetails_name"
                                                         md-items="itemr in get_rent_types(search_rent_types)"
                                                         md-menu-class="md-virtual-repeat-container"
                                                         md-min-length=0
                                                         md-no-cache="true"
                                                         md-search-text="search_rent_types"
                                                         md-selected-item="all_data.rent_type"
                                                         md-selected-item-change="rent_types_changed(itemr.dropdowndetails_gid)">
                                            <md-item-template>
                                                <span md-highlight-text="search_rent_types"> {{itemr.dropdowndetails_name}}</span>
                                            </md-item-template>
                                            <md-not-found>
                                                No Data matching "{{search_rent_types}}" were found.
                                            </md-not-found>
                                        </md-autocomplete>
                                    </div>

                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Total Rent Amount</label>
                                            <input ng-model="all_data.rent_amount" valid-number only-numbers
                                                   maxlength="15" required/>
                                        </md-input-container>
                                    </div>
                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Total Amenities Amount</label>
                                            <input ng-model="all_data.amenities_amount" valid-number only-numbers
                                                   maxlength="15"/>
                                        </md-input-container>
                                    </div>
                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Total Maintenance Amount</label>
                                            <input ng-model="all_data.maintenace_amount" valid-number only-numbers
                                                   maxlength="15"/>
                                        </md-input-container>
                                    </div>
                                </div>
                            </div>
                            <div class="row">>
                                <div class="col-md-12">
                                    <div class="col-md-3">
                                        <md-autocomplete md-clear-button="true"
                                                         md-floating-label="Landlord"
                                                         md-item-text="item.landlord_name"
                                                         md-items="item in get_landlord_datas(search_landlord)"
                                                         md-menu-class="md-virtual-repeat-container"
                                                         md-min-length=0
                                                         md-no-cache="true"
                                                         md-search-text="search_landlord"
                                                         md-selected-item="all_data.rent_landlord"
                                                         md-selected-item-change="rent_landlord_changed(item.landlord_gid)">
                                            <md-item-template>
                                                <span md-highlight-text="search_landlord"> {{item.landlord_name}}</span>
                                            </md-item-template>
                                            <md-not-found>
                                                No Data matching "{{search_landlord}}" were found.
                                            </md-not-found>
                                        </md-autocomplete>
                                    </div>
                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Rent Allocation Ratio</label>
                                            <input type="number"
                                                   placeholder="Rent Allocation in Percentage"
                                                   ng-model="all_data.rent_allocation_ratio"
                                                   min="1" max="100" required/>
                                        </md-input-container>
                                    </div>
                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Security Deposit Paid</label>
                                            <md-select md-container-class="popup_select"
                                                       ng-required="true"
                                                       ng-model="all_data.sec_dep_rec">
                                                <md-option ng-repeat="y in yes_no" ng-value="y.id">
                                                    {{y.data}}
                                                </md-option>
                                            </md-select>
                                        </md-input-container>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="col-md-5"></div>
                                    <div class="col-md-3">
                                        <md-button class="md-raised custbutton" value="submit"
                                                   ng-disabled="rent_form.$invalid"
                                                   ng-hide="edit_rent=='Y' || Page_Name=='Premises_Approval_Summary'"
                                                   ng-click="save_data('RENT','NEW')">
                                            Save
                                        </md-button>

                                        <md-button class="md-raised" value="submit"
                                                   ng-disabled="rent_form.$invalid"
                                                   ng-hide="edit_rent=='N' || Page_Name=='Premises_Approval_Summary'"
                                                   ng-click="save_data('RENT','UPDATE')">
                                            Update
                                        </md-button>

                                        <md-button class="md-raised md-warn" value="close" data-dismiss="modal"
                                                   aria-label="Close">Cancel
                                        </md-button>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div class="row table-responsive">
                            <div class="col-md-12 col-lg-12 col-sm-12">
                                <table class="table table-striped table-bordered table-condensed table-hover md-primary"
                                       md-progress="deferred">
                                    <thead class="header">
                                    <tr>
                                        <th>S.No</th>
                                        <th>Rent Agreement Type</th>
                                        <th>Total Rent Amount</th>
                                        <th>Rent Ratio</th>
                                        <th>Rent Secure Recived</th>
                                        <th>Edit</th>
                                        <th>Term</th>
                                        <th>Arrear</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr align="center"
                                        ng-repeat="rent in rent_details.slice(((rent_currentPage-1)*rent_itemsPerPage),((rent_currentPage)*rent_itemsPerPage)) | filter:search:strict">
                                        <td>
                                            <center>
                                                {{((rent_currentPage-1)*rent_itemsPerPage)+$index+1}}
                                            </center>
                                        </td>
                                        <td>{{rent.paymenttype}}</td>
                                        <td>{{rent.rent_incrementalrent}}</td>
                                        <td>{{rent.rent_ratio}}</td>
                                        <td>{{rent.rent_sdreceived}}</td>
                                        <td align="center">
                                            <a><i class="material-icons"
                                                  ng-click="edit_rent_data(rent)">
                                                edit
                                            </i></a>
                                        </td>
                                        <!--                                        <td>{{rent.peroidfrom}}</td>-->
                                        <!--                                        <td>{{rent.peroidto}}</td>-->
                                        <td align="center">
                                            <span class="editlink material-icons"
                                                  ng-click="add_term(rent)">arrow_upward
                                             </span>
                                        </td>
                                        <td align="center">
                                            <span class="editlink material-icons"
                                                  ng-click="add_arrear(rent)">arrow_upward
                                             </span>
                                        </td>
                                    </tr>
                                    <tr ng-show="rent_details.length ==  0">
                                        <td class="warning" colspan="12">
                                            No Records Found.
                                        </td>
                                    </tr>
                                    </tbody>
                                    <tfoot>
                                    <tr align="center">
                                        <td colspan="6">
                                            <ul uib-pagination
                                                total-items="rent_details.length"
                                                ng-model="rent_currentPage"
                                                max-size="rent_maxSize"
                                                class="pagination-sm"
                                                boundary-links="true"
                                                items-per-page="rent_itemsPerPage"></ul>
                                        </td>
                                        <td colspan="2">
                                            Total Records:{{rent_details.length}}
                                        </td>
                                    </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="term_popup" tabindex="-1" role="dialog" data-backdrop="static"
             data-keyboard="false"
             aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-sm" role="document" style="width:90%">
                <div class="modal-content">
                    <div class="modal-header popup-header">
                        <h5 class="modal-title" id="exampleModalLabels3">
                            ADD TERM
                            <button type="button" class="close" data-dismiss="modal"
                                    ng-click=""
                                    aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </h5>
                    </div>
                    <div class="body">
                        <br/>
                        <form name="term_form" novalidate>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="col-md-3">
                                        <!--                                        <md-input-container class="md-block inputcontainer" ng-show="term_no == 0">-->
                                        <!--                                            <label>Term No</label>-->
                                        <!--                                            <input disabled value="NEW" type="text"/>-->
                                        <!--                                        </md-input-container>-->
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Term No</label>
                                            <input ng-model="all_data.term_no" valid-number only-numbers
                                                   maxlength="60"/>
                                        </md-input-container>

                                    </div>
                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Period From</label>
                                            <md-datepicker md-hide-icons="calendar"
                                                           ng-model="all_data.term_peroidfrom"
                                                           md-hide-icons="calendar" ng-click="date"
                                                           md-min-date="maxDate"
                                                           md-max-date="minDate" required></md-datepicker>
                                        </md-input-container>
                                    </div>
                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Period To</label>
                                            <md-datepicker md-hide-icons="calendar"
                                                           ng-model="all_data.term_peroidto"
                                                           md-hide-icons="calendar" ng-click="date"
                                                           md-min-date="maxDate"
                                                           md-max-date="minDate" required></md-datepicker>
                                        </md-input-container>
                                    </div>
                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Term Peroid</label>
                                            <input ng-model="all_data.term_rentperiod" valid-number only-numbers
                                                   maxlength="15" required placeholder="Months In Number"/>
                                        </md-input-container>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Rent Amount</label>
                                            <input ng-model="all_data.term_rent_amount" valid-number only-numbers
                                                   maxlength="15" required/>
                                        </md-input-container>
                                    </div>
                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Amenities Amount</label>
                                            <input ng-model="all_data.term_amenities_amount" valid-number only-numbers
                                                   maxlength="15" required/>
                                        </md-input-container>
                                    </div>
                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Maintenance Amount</label>
                                            <input ng-model="all_data.term_maintenance_amount" valid-number only-numbers
                                                   maxlength="15" required/>
                                        </md-input-container>
                                    </div>
                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Term Remarks</label>
                                            <input ng-model="all_data.term_remarks"
                                                   maxlength="124" required/>
                                        </md-input-container>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="col-md-5"></div>
                                    <div class="col-md-4">
                                        <md-button class="md-raised custbutton" value="submit"
                                                   ng-disabled="term_form.$invalid"
                                                   ng-hide="edit_term=='Y' || Page_Name=='Premises_Approval_Summary'"
                                                   ng-click="save_data('TERM','NEW')">
                                            Save
                                        </md-button>

                                        <md-button class="md-raised" value="submit"
                                                   ng-disabled="term_form.$invalid"
                                                   ng-hide="edit_term=='N' || Page_Name=='Premises_Approval_Summary'"
                                                   ng-click="save_data('TERM','UPDATE')">
                                            Update
                                        </md-button>

                                        <md-button class="md-raised md-warn" value="close" data-dismiss="modal"
                                                   aria-label="Close">Cancel
                                        </md-button>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div class="row table-responsive">
                            <div class="col-md-12 col-lg-12 col-sm-12">
                                <table class="table table-striped table-bordered table-condensed table-hover md-primary"
                                       md-progress="deferred">
                                    <thead class="header">
                                    <tr>
                                        <th>S.No</th>
                                        <th>Term No</th>
                                        <th>Period From</th>
                                        <th>Period To</th>
                                        <th>Rent Amount</th>
                                        <th>Amenities Amount</th>
                                        <th>Maintenance Amount</th>
                                        <th>Edit</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr align="center"
                                        ng-repeat="term in term_details.slice(((term_currentPage-1)*term_itemsPerPage),((term_currentPage)*term_itemsPerPage)) | filter:search:strict">
                                        <td>
                                            <center>
                                                {{((term_currentPage-1)*term_itemsPerPage)+$index+1}}
                                            </center>
                                        </td>
                                        <td>{{term.term_no}}</td>
                                        <td>{{term.term_peroidfrom | date:'dd-MMM-yyyy'}}</td>
                                        <td>{{term.term_peroidto | date:'dd-MMM-yyyy'}}</td>
                                        <td>{{term.term_amount}}</td>
                                        <td>{{term.term_amenities_amount}}</td>
                                        <td>{{term.term_maintenace_amount}}</td>
                                        <td align="center">
                                            <a><i class="material-icons"
                                                  ng-click="edit_term_data(term)">
                                                edit
                                            </i></a>
                                        </td>
                                    </tr>
                                    <tr ng-show="term_details.length == 0">
                                        <td class="warning" colspan="11">
                                            No Records Found.
                                        </td>
                                    </tr>
                                    </tbody>
                                    <tfoot>
                                    <tr align="center">
                                        <td colspan="6">
                                            <ul uib-pagination
                                                total-items="term_details.length"
                                                ng-model="term_currentPage"
                                                max-size="term_maxSize"
                                                class="pagination-sm"
                                                boundary-links="true"
                                                items-per-page="term_itemsPerPage"></ul>
                                        </td>
                                        <td colspan="2">
                                            Total Records:{{term_details.length}}
                                        </td>
                                    </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="arrear_popup" tabindex="-1" role="dialog" data-backdrop="static"
             data-keyboard="false"
             aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-sm" role="document" style="width:90%">
                <div class="modal-content">
                    <div class="modal-header popup-header">
                        <h5 class="modal-title" id="exampleModalLabels4">
                            ADD ARREAR
                            <button type="button" class="close" data-dismiss="modal"
                                    ng-click=""
                                    aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </h5>
                    </div>
                    <div class="body">
                        <br/>
                        <form name="arrear_form" novalidate>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="col-md-3">
                                        <!--                                        <md-input-container class="md-block inputcontainer" ng-show="arrear_no == 0">-->
                                        <!--                                            <label>Arrear ID</label>-->
                                        <!--                                            <input disabled value="NEW" type="text"/>-->
                                        <!--                                        </md-input-container>-->
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Arrear No</label>
                                            <input ng-model="all_data.arrear_no" valid-number only-numbers
                                                   maxlength="60"/>
                                        </md-input-container>

                                    </div>
                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>From Date</label>
                                            <md-datepicker md-hide-icons="calendar"
                                                           ng-model="all_data.arrear_from_date"
                                                           md-hide-icons="calendar" ng-click="date"
                                                           md-min-date="maxDate"
                                                           md-max-date="minDate" required></md-datepicker>
                                        </md-input-container>
                                    </div>
                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>To Date</label>
                                            <md-datepicker md-hide-icons="calendar"
                                                           ng-model="all_data.arrear_to_date"
                                                           md-hide-icons="calendar" ng-click="date"
                                                           md-min-date="maxDate"
                                                           md-max-date="minDate" required></md-datepicker>
                                        </md-input-container>
                                    </div>
                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Amount</label>
                                            <input ng-model="all_data.arrear_amount" valid-number only-numbers
                                                   maxlength="15" required/>
                                        </md-input-container>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="col-md-3">
                                        <md-autocomplete md-clear-button="true"
                                                         md-floating-label="Landlord"
                                                         md-item-text="item.landlord_name"
                                                         md-items="item in get_landlord_datas(search_arrear_landlord)"
                                                         md-menu-class="md-virtual-repeat-container"
                                                         md-min-length=0
                                                         md-no-cache="true"
                                                         ng-required="true"
                                                         md-search-text="search_arrear_landlord"
                                                         md-selected-item="all_data.arrear_landlord"
                                                         md-selected-item-change="arrear_landlord_changed(item.landlord_gid)">
                                            <md-item-template>
                                                <span md-highlight-text="search_arrear_landlord"> {{item.landlord_name}}</span>
                                            </md-item-template>
                                            <md-not-found>
                                                No Data matching "{{search_arrear_landlord}}" were found.
                                            </md-not-found>
                                        </md-autocomplete>
                                    </div>
                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Remarks</label>
                                            <input ng-model="all_data.arrear_remarks" required
                                                   maxlength="15"/>
                                        </md-input-container>
                                    </div>

                                    <div class="col-md-3">
                                        <md-button class="md-raised custbutton" value="submit"
                                                   ng-disabled="arrear_form.$invalid"
                                                   ng-hide="edit_arrear=='Y' || Page_Name=='Premises_Approval_Summary'"
                                                   ng-click="save_data('ARREAR','NEW')">
                                            Save
                                        </md-button>

                                        <md-button class="md-raised" value="submit"
                                                   ng-disabled="arrear_form.$invalid"
                                                   ng-hide="edit_arrear=='N' || Page_Name=='Premises_Approval_Summary'"
                                                   ng-click="save_data('ARREAR','UPDATE')">
                                            Update
                                        </md-button>

                                        <md-button class="md-raised md-warn" value="close" data-dismiss="modal"
                                                   aria-label="Close">Cancel
                                        </md-button>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div class="row table-responsive">
                            <div class="col-md-12 col-lg-12 col-sm-12">
                                <table class="table table-striped table-bordered table-condensed table-hover md-primary"
                                       md-progress="deferred">
                                    <thead class="header">
                                    <tr>
                                        <th>S.No</th>
                                        <th>Arrear No</th>
                                        <th>From Date</th>
                                        <th>To Date</th>
                                        <th>Amount</th>
                                        <th>Landlord Name</th>
                                        <th>Remarks</th>
                                        <th>Edit</th>
                                    </tr>
                                    <tr ng-show="arrrear_details.length == 0">
                                        <td class="warning" colspan="10">
                                            No Records Found.
                                        </td>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr align="center"
                                        ng-repeat="arrear in arrrear_details.slice(((arrear_currentPage-1)*arrear_itemsPerPage),((arrear_currentPage)*arrear_itemsPerPage)) | filter:search:strict">
                                        <td>
                                            <center>
                                                {{((arrear_currentPage-1)*arrear_itemsPerPage)+$index+1}}
                                            </center>
                                        </td>
                                        <td>{{arrear.arrear_no}}</td>
                                        <td>{{arrear.arrear_fromdate | date:'dd-MMM-yyyy'}}</td>
                                        <td>{{arrear.arrear_todate | date:'dd-MMM-yyyy'}}</td>
                                        <td>{{arrear.arrear_amount}}</td>
                                        <td>{{arrear.landlord_name}}</td>
                                        <td>{{arrear.arrear_remark}}</td>
                                        <td align="center">
                                            <a><i class="material-icons"
                                                  ng-click="edit_arrear_data(arrear)">
                                                edit
                                            </i></a>
                                        </td>
                                    </tr>
                                    </tbody>
                                    <tfoot>
                                    <tr align="center">
                                        <td colspan="6">
                                            <ul uib-pagination
                                                total-items="arrrear_details.length"
                                                ng-model="arrear_currentPage"
                                                max-size="arrear_maxSize"
                                                class="pagination-sm"
                                                boundary-links="true"
                                                items-per-page="arrear_itemsPerPage"></ul>
                                        </td>
                                        <td colspan="2">
                                            Total Records:{{arrrear_details.length}}
                                        </td>
                                    </tr>
                                    </tfoot>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>


{% endverbatim %}
<script>
var myApp = angular.module('App_maker_summary', ['ngMaterial','ui.bootstrap','ngMessages','AppCommon']).config(function($httpProvider) {
    $httpProvider.defaults.xsrfCookieName = 'csrftoken';
    $httpProvider.defaults.xsrfHeaderName = 'X-CSRFToken';
});

myApp.run(function($mdDateLocale, $filter) {
    $mdDateLocale.formatDate = function(date) {
        return $filter('date')(date, "dd-MMM-yyyy");
    };
})

myApp.controller('Ctrl_amc_maker', ['$scope','agree_service','$mdDialog','$window','$filter','$http',
function($scope,agree_service,$mdDialog,$window,$filter,$http) {
    $scope.currentPage=1;
    $scope.maxSize=3;
    $scope.itemsPerPage=10;

    $scope.rent_currentPage=1;
    $scope.rent_maxSize=3;
    $scope.rent_itemsPerPage=10;

    $scope.term_currentPage=1;
    $scope.term_maxSize=3;
    $scope.term_itemsPerPage=10;

    $scope.arrear_currentPage=1;
    $scope.arrear_maxSize=3;
    $scope.arrear_itemsPerPage=10;

    $scope.rent_gid=0;
    $scope.agreement_edit="N";
    $scope.edit_rent="N";
    $scope.edit_term="N";



    $scope.all_data={};
    $scope.agreement_gid=0;


    $scope.loading = function() {
        $mdDialog.show({
            templateUrl: 'loaderSpinner',
            parent: angular.element(document.body),
            clickOutsideToClose: false
        });
    };

    $scope.loading_rent = function() {
            $mdDialog.show({
                templateUrl: 'loaderSpinner',
                parent: angular.element(document.getElementById('rent_popup')),
                clickOutsideToClose: false
            });
    };

    $scope.loading_term = function() {
            $mdDialog.show({
                templateUrl: 'loaderSpinner',
                parent: angular.element(document.getElementById('term_popup')),
                clickOutsideToClose: false
            });
    };

    $scope.loading_arrear = function() {
            $mdDialog.show({
                templateUrl: 'loaderSpinner',
                parent: angular.element(document.getElementById('arrear_popup')),
                clickOutsideToClose: false
            });
    };


    $scope.endloading = function() {
        $mdDialog.hide();
    };
    $scope.add_rent=function(agreemnet){
        debugger;
        $scope.all_data={};
        $scope.edit_rent="N";
        $scope.agreement_data=agreemnet;
        $scope.agreement_gid=agreemnet.agreement_gid;
        var datas={"group":"PREMISES","action":"GET","type":"PREMISES_RENT",
                    "filter":{"agreementgid":$scope.agreement_gid}};
             $scope.loading_rent();
            var rent= agree_service.premises_process_get(datas);
            rent.then(function(result) {
                var res=result.data;
                $scope.rent_details=res;
                console.log($scope.rent_details);
            }, function(err) {
              alert('No Data');
            }).finally($scope.endloading);
        modalshow('rent_popup');
    }
    $scope.add_term=function(rent_data){
        debugger;
        $scope.rent_data=rent_data;
        $scope.rent_gid=rent_data.rent_gid;
        $scope.edit_term="N";
        var datas={"group":"PREMISES","action":"GET","type":"PREMISES_TERM",
                    "filter":{"rentgid":$scope.rent_gid}};
             $scope.loading_term();
            var term= agree_service.premises_process_get(datas);
            term.then(function(result) {
                var res=result.data;
                $scope.term_details=res;
                console.log($scope.term_details);
            }, function(err) {
              alert('No Data');
            }).finally($scope.endloading);

        modalshow('term_popup');
    }
    $scope.add_arrear=function(rent_data){

        $scope.rent_data=rent_data;
        $scope.edit_arrear="N";
        $scope.rent_gid=rent_data.rent_gid;
        modalshow('arrear_popup');

        var datas={"group":"PREMISES","action":"GET","type":"PREMISES_ARREAR",
                    "filter":{"rentgid":$scope.rent_gid}};
             $scope.loading_arrear();
            var arrear= agree_service.premises_process_get(datas);
            arrear.then(function(result) {
                var res=result.data;
                $scope.arrrear_details=res;
                console.log($scope.arrrear_details);
            }, function(err) {
              alert('No Data');
            }).finally($scope.endloading);
    }
    
    $scope.get_Premises_Data = function(){
       debugger;
        var datas = {"action":"GET","type":"BRANCH_EXPENSE_GID",
        "filter": {"Branch_Premises_Gid":"","Premises_Property_Gid":"",
        "Premises_Property_Name":"","Branch_Premises_Page":""}}
        var setcolumndata = agree_service.get_session_expense(datas);
            setcolumndata.then(function(result) {
            $scope.Branch_Premises_Gid=result.data.Branch_Premises_Gid;
            $scope.Premises_Property_Gid=result.data.Premises_Property_Gid;
            $scope.Premises_Property_Name=result.data.Premises_Property_Name;
            $scope.Page_Name=result.data.Branch_Premises_Page;
            console.log(result.data);
            $scope.load_agreement_summary();
            $scope.get_landlord();

            if($scope.Branch_Premises_Gid!=0){
                $scope.execute_premises=1;
            }
            else{
                alert("No Premises");
            }
        },
       function(err) {
            alert("No Premises Gid");
       }).finally($scope.endloading);
    }
    $scope.get_Premises_Data();

    $scope.get_landlord=function(){
    debugger;
         var datas={"group":"PREMISES","action":"GET","type":"PREMISES_LANDLORD",
                "filter":{"propertygid":$scope.Premises_Property_Gid}};
        var premises_summary = agree_service.premises_process_get(datas);
        premises_summary.then(function(result) {
            var res=result.data;
            $scope.landlord_summary=res;
            console.log($scope.landlord_summary);
        }, function(err) {
          alert('No Data');
        }).finally($scope.endloading);
    }

    $scope.get_landlord_datas= change_land;
        function change_land(query) {
            var result = $filter('filter')($scope.landlord_summary, {
            'landlord_name':query,
        });
        return result;
    }
    $scope.rent_landlord_changed=function(landlord){
        if(landlord!=undefined){
            $scope.rent_landlord_gid=landlord;
        }
    }

    $scope.arrear_landlord_changed=function(landlord){
        if(landlord!=undefined){
            $scope.arrear_landlord_gid=landlord;
        }
    }
    $scope.edit_agreement=function(agreement){
        debugger;
        $scope.agreement_edit="Y";
        $scope.agreement_gid=agreement.agreement_gid;
        $scope.all_data.Start_date=agreement.startdate;
        $scope.all_data.End_date=agreement.leasevalid;
        $scope.all_data.lease_period=agreement.agreement_leaseperiod;
        $scope.all_data.Enhancement_term=agreement.agreement_lease_enhancementterms;
        $scope.all_data.reg_no=agreement.agreement_registration;
        $scope.all_data.Registration_date=agreement.registrationdate;
        $scope.all_data.leasechrg=agreement.agreement_leasecharges_paid_by_name;
        $scope.all_data.leasechrg_gid=agreement.agreement_leasecharges;
        $scope.all_data.rent_adjst=agreement.agreement_rentadjustment;
        $scope.all_data.relax_period=agreement.agreement_relaxation_period;
        $scope.all_data.vacationterm=agreement.agreement_vacationterms;
        $scope.all_data.noticeperiod=agreement.agreement_vacation_noticeperiod;
        $scope.all_data.lockin=agreement.agreement_lockin_period;
    }
    $scope.edit_rent_data=function(rent){
        $scope.edit_rent="Y";
        $scope.rent_gid=rent.rent_gid;
        $scope.all_data.rent_type=rent.paymenttype;
        $scope.rent_type_gid=rent.rent_paymenttype;
        $scope.rent_landlord_gid=rent.rent_landlordgid;
        $scope.all_data.rent_amount=rent.rent_incrementalrent;
        $scope.all_data.amenities_amount="";
        $scope.all_data.maintenace_amount="";
        $scope.all_data.rent_landlord=rent.landlord_name;
        $scope.all_data.rent_allocation_ratio=rent.rent_ratio;
        $scope.all_data.sec_dep_rec=rent.rent_sdreceived;
    }

    $scope.edit_term_data=function(term){
        $scope.edit_term="Y";
        $scope.term_gid=term.term_gid;
        $scope.all_data.term_no=term.term_no;
        $scope.all_data.term_peroidfrom=term.term_peroidfrom;
        $scope.all_data.term_peroidto=term.term_peroidto;
        $scope.all_data.term_rentperiod=term.term_rentperiod;
        $scope.all_data.term_rent_amount=term.term_amount;
        $scope.all_data.term_maintenance_amount=term.term_maintenace_amount;
        $scope.all_data.term_remarks=term.term_remark;
        $scope.all_data.term_amenities_amount=term.term_amenities_amount;

    }

    $scope.edit_arrear_data=function(arrear){
        $scope.edit_arrear="Y";
        $scope.arrear_gid=arrear.arrear_gid;
        $scope.all_data.arrear_no=arrear.arrear_no;
        $scope.all_data.arrear_from_date=arrear.arrear_fromdate;
        $scope.all_data.arrear_to_date=arrear.arrear_todate;
        $scope.arrear_landlord_gid=arrear.arrear_landlordgid;
        $scope.all_data.arrear_landlord=arrear.landlord_name;
        $scope.all_data.arrear_amount=arrear.arrear_amount;
        $scope.all_data.arrear_remarks=arrear.arrear_remark;


    }

<!--    $scope.all_data.Registration_date="";-->
<!--    $scope.all_data.leasechrg_gid="";-->

    $scope.save_data=function(type,action){
        debugger;
        if(type=="AGREEMENT" && action=="NEW"){
            $scope.startdate=$filter('date')($scope.all_data.Start_date, "yyyy-MM-dd");
            $scope.leasevalid=$filter('date')($scope.all_data.End_date, "yyyy-MM-dd");
            $scope.registrationdate=$filter('date')($scope.all_data.Registration_date, "yyyy-MM-dd");
            var datas={"group":"PREMISES","action":"ANY","type":"PREMISES_AGREEMENT",
                       "filter":{"propertygid": $scope.Premises_Property_Gid,
                        "startdate": $scope.startdate,
                        "leaseperiod": $scope.all_data.lease_period,
                        "leasevalid": $scope.leasevalid,
                        "lease_enhancementterms": $scope.all_data.Enhancement_term,
                        "agreement_registration":$scope.all_data.reg_no,
                        "registrationdate": $scope.registrationdate,
                        "leasecharges": $scope.all_data.leasechrg_gid,
                        "relaxation_period": $scope.all_data.relax_period,
                        "rentadjustment":$scope.all_data.rent_adjst,
                        "vacationterms": $scope.all_data.vacationterm,
                        "vacation_noticeperiod": $scope.all_data.noticeperiod,
                        "lockin_period": $scope.all_data.lockin}};
        }
        if(type=="AGREEMENT" && action=="UPDATE"){
            if($scope.agreement_gid!=0){
                $scope.startdate=$filter('date')($scope.all_data.Start_date, "yyyy-MM-dd");
                $scope.leasevalid=$filter('date')($scope.all_data.End_date, "yyyy-MM-dd");
                $scope.registrationdate=$filter('date')($scope.all_data.Registration_date, "yyyy-MM-dd");
                var datas={"group":"PREMISES","action":"ANY","type":"PREMISES_AGREEMENT",
                           "filter":{"agreement_gid": $scope.agreement_gid,
                            "startdate": $scope.startdate,
                            "leaseperiod": $scope.all_data.lease_period,
                            "leasevalid": $scope.leasevalid,
                            "lease_enhancementterms": $scope.all_data.Enhancement_term,
                            "agreement_registration":$scope.all_data.reg_no,
                            "registrationdate": $scope.registrationdate,
                            "leasecharges": $scope.all_data.leasechrg_gid,
                            "relaxation_period": $scope.all_data.relax_period,
                            "rentadjustment":$scope.all_data.rent_adjst,
                            "vacationterms": $scope.all_data.vacationterm,
                            "vacation_noticeperiod": $scope.all_data.noticeperiod,
                            "lockin_period": $scope.all_data.lockin}};
            }
            else{
                alert("No Agreement");
            }
        }
        else if(type=="RENT" && action=="NEW"){
            if($scope.agreement_gid!=0){
                var datas={"group":"PREMISES","action":"ANY","type":"PREMISES_RENT",
                           "filter":{"propertygid": $scope.Premises_Property_Gid,
                           "agreementgid":$scope.agreement_gid,
                           "landlordgid": $scope.rent_landlord_gid,
                            "rent_ratio":$scope.all_data.rent_allocation_ratio,
                            "rent_sdreceived":$scope.all_data.sec_dep_rec,
                            "rent_incrementalrent":$scope.all_data.rent_amount,
                            "rent_paymenttype": $scope.rent_type_gid,
                            "rent_peroidfrom": "0000-00-00",
                            "rent_peroidto": "0000-00-00"}};
            }
            else{
                alert("No Agreement Data");
            }
        }
        else if(type=="RENT" && action=="UPDATE"){
            if($scope.rent_gid!=0){
                var datas={"group":"PREMISES","action":"ANY","type":"PREMISES_RENT",
                           "filter":{"rent_gid":$scope.rent_gid,
                           "landlordgid": $scope.rent_landlord_gid,
                            "rent_ratio":$scope.all_data.rent_allocation_ratio,
                            "rent_sdreceived":$scope.all_data.sec_dep_rec,
                            "rent_incrementalrent":$scope.all_data.rent_amount,
                            "rent_paymenttype": $scope.rent_type_gid,
                            "rent_peroidfrom": "0000-00-00",
                            "rent_peroidto": "0000-00-00"}};
            }
            else{
                alert("No Rent Gid");
            }

        }
        else if(type=="TERM" && action=="NEW"){
            if($scope.rent_gid!=0){
            $scope.term_peroidfrom=$filter('date')($scope.all_data.term_peroidfrom, "yyyy-MM-dd");
            $scope.term_peroidto=$filter('date')($scope.all_data.term_peroidto, "yyyy-MM-dd");
            var datas={"group":"PREMISES","action":"ANY","type":"AGREEMENT_TERMS",
                           "filter":{"term_rentgid":$scope.rent_gid,
                            "term_propertygid":$scope.Premises_Property_Gid,
                             "term_no":$scope.all_data.term_no,
                           "term_amount":$scope.all_data.term_rent_amount,
                           "term_rentperiod":$scope.all_data.term_rentperiod,
                           "term_amenities_amount":$scope.all_data.term_amenities_amount,
                           "term_maintenace_amount":$scope.all_data.term_maintenance_amount,
                           "term_peroidfrom":$scope.term_peroidfrom,
                           "term_peroidto":$scope.term_peroidto,
                           "term_remark":$scope.all_data.term_remarks}};
            }
            else{
                alert("No Rent Data");
            }
        }
        else if(type=="TERM" && action=="UPDATE"){
            if($scope.rent_gid!=0){
            $scope.term_peroidfrom=$filter('date')($scope.all_data.term_peroidfrom, "yyyy-MM-dd");
            $scope.term_peroidto=$filter('date')($scope.all_data.term_peroidto, "yyyy-MM-dd");
            var datas={"group":"PREMISES","action":"ANY","type":"AGREEMENT_TERMS",
                           "filter":{"term_gid":$scope.term_gid,
                             "term_no":$scope.all_data.term_no,
                           "term_amount":$scope.all_data.term_rent_amount,
                           "term_rentperiod":$scope.all_data.term_rentperiod,
                           "term_amenities_amount":$scope.all_data.term_amenities_amount,
                           "term_maintenace_amount":$scope.all_data.term_maintenance_amount,
                           "term_peroidfrom":$scope.term_peroidfrom,
                           "term_peroidto":$scope.term_peroidto,
                           "term_remark":$scope.all_data.term_remarks}};
            }
            else{
                alert("No Rent Data");
            }
        }
        else if(type=="ARREAR" && action=="NEW"){
            $scope.arrear_from=$filter('date')($scope.all_data.arrear_from_date, "yyyy-MM-dd");
            $scope.arrear_to=$filter('date')($scope.all_data.arrear_to_date, "yyyy-MM-dd");
            var datas={"group":"PREMISES","action":"ANY","type":"AGREEMENT_ARREAR",
                           "filter":{"arrear_rentgid":$scope.rent_gid,
                           "arrear_propertygid":$scope.Premises_Property_Gid,
                           "arrear_landlordgid":$scope.arrear_landlord_gid,
                            "arrear_no":$scope.all_data.arrear_no,
                           "arrear_amount":$scope.all_data.arrear_amount,
                            "arrear_fromdate":$scope.arrear_from,
                           "arrear_todate":$scope.arrear_to,
                            "arrear_remark":$scope.all_data.arrear_remarks}};

        }

        else if(type=="ARREAR" && action=="UPDATE"){
            $scope.arrear_from=$filter('date')($scope.all_data.arrear_from_date, "yyyy-MM-dd");
            $scope.arrear_to=$filter('date')($scope.all_data.arrear_to_date, "yyyy-MM-dd");
            var datas={"group":"PREMISES","action":"ANY","type":"AGREEMENT_ARREAR",
                           "filter":{"arrear_gid":$scope.arrear_gid,
                           "arrear_propertygid":$scope.Premises_Property_Gid,
                           "arrear_landlordgid":$scope.arrear_landlord_gid,
                            "arrear_no":$scope.all_data.arrear_no,
                           "arrear_amount":$scope.all_data.arrear_amount,
                           "arrear_fromdate":$scope.arrear_from,
                           "arrear_todate":$scope.arrear_to,
                           "arrear_remark":$scope.all_data.arrear_remarks}};

        }

        if(type=="AGREEMENT"){$scope.loading();}
        else if(type=="RENT"){$scope.loading_rent();}
        else if(type=="TERM"){$scope.loading_term();}
        else if(type=="ARREAR"){$scope.loading_arrear();}


        var premises_creation = agree_service.premises_process_set(datas);
        premises_creation.then(function(result) {
            var res=result.data.MESSAGE;
             if (res=== "SUCCESS") {
                 alert("SUCCESS");
                 $scope.all_data={};
                 if(type=="RENT"){
                    $scope.edit_rent="N";
                    $scope.add_rent($scope.agreement_data);
                 }
                 else if(type=="AGREEMENT"){
                    $scope.agreement_edit="N";
                    $scope.load_agreement_summary();

                 }
                 else if(type=="TERM"){

                    $scope.add_term($scope.rent_data);
                 }
                 else if(type=="ARREAR"){
                    $scope.add_arrear($scope.rent_data);
                 }
             }
             else
             {
                alert(JSON.stringify(result.data));
             }
        }, function(err) {
          alert('Data Not Inserted');
        }).finally($scope.endloading);
    }

    $scope.load_agreement_summary=function(){

         var datas={"group":"PREMISES","action":"GET","type":"PREMISES_AGREEMENT",
                "filter":{"propertygid":$scope.Premises_Property_Gid}};
         $scope.loading();
        var premises_summary = agree_service.premises_process_get(datas);
        premises_summary.then(function(result) {
            $scope.endloading();
            var res=result.data;
            $scope.Agreementdata=res;
            console.log(res);
        }, function(err) {
          alert('No Data');
        }).finally($scope.endloading);
    }

   $scope.yes_no = [{
        id: 'Y',
        data: 'YES'
    }, {
        id: 'N',
        data: 'NO'
    }];


   $scope.agree_leasechrg = function(query) {
        var unit_ownership2 = {
            "group":"PREMISES",
            "action":"GET",
            "type":"PREMISES_COMMON_DROPDOWN",
            "filter":{
                "dropdown_name": "Lease Charge"
            }
        }
        return $http.post(Appname + '/Get_premises/' , unit_ownership2).then(function(data) {
                var final_values=data.data;
                return final_values;
              });
   };

   $scope.agree_leasechrg_changed=function(agreement){
   debugger;
        if(agreement!=undefined){
            debugger;
            $scope.all_data.leasechrg_gid=agreement;
        }
   }


    $scope.registration_change = function(e){

        if(e == 1){
            $scope.reg_data = false;
        }
        else if(e == 0){
            $scope.reg_data = true;
        }
    }

   var Registration = {
        "group":"PREMISES",
        "action":"GET",
        "type":"PREMISES_COMMON_DROPDOWN",
        "filter":{
            "dropdown_name": "Lease Registration"
        }
   }
   var get_eclaim = agree_service.premises_process_get(Registration)
    get_eclaim.then(function(result) {
        $scope.main = result.data;
        if($scope.main){
            if(result.data.MESSAGE == "NOT_FOUND" ){
                $scope.data_len = 0;
            }
            else{
                $scope.lease_registration = $scope.main;
            }
        }
    }),
    function() {
        alert('no data');
    };

    var renttype = {
        "group":"PREMISES",
        "action":"GET",
        "type":"PREMISES_COMMON_DROPDOWN",
        "filter":{
            "dropdown_name": "Rent Type"
        }
    }
    var get_eclaim = agree_service.premises_process_get(renttype)
    get_eclaim.then(function(result) {
        $scope.main = result.data;
        if($scope.main){
            if(result.data.MESSAGE == "NOT_FOUND" ){
                $scope.data_len = 0;
            }
            else{
                $scope.renttype = $scope.main;
                console.log($scope.renttype);
            }
        }
    }),
    function() {
        alert('no data');
    };

    $scope.get_rent_types= change_tds;
        function change_tds(query) {
            var result = $filter('filter')($scope.renttype, {
            'dropdowndetails_name':query,
        });
        return result;
    }
    $scope.rent_types_changed=function(rent_types){
        if(rent_types!=undefined){
            $scope.rent_type_gid=rent_types;
        }
    }




}]);
myApp.service("agree_service", function ($http) {
    this.getpincodeall = function(pincode) {
        var response = $http.get(Appname + "/allpinget/", {
            params: {
                "pincode": pincode
            }
        });
        return response;
    }

    this.getdistddl = function(state_gid) {
        var response = $http.get(Appname + "/districtddl/", {
            params: {
                "state_gid": state_gid
            }
        });
        return response;
    }

    this.getcityddl = function(district_gid) {
        var response = $http.get(Appname + "/cityddl/", {
            params: {
                "district_gid": district_gid
            }
        });
        return response;
    }

    this.getpincode = function(city_gid) {
        var response = $http.get(Appname + "/pincode/", {
            params: {
                "city_gid": city_gid
            }
        });
        return response;
    }

    this.getstateddl = function(d) {
        var response = $http.get(Appname + "/stateddl/");
        return response;
    }

    this.premises_process_set=function (data) {
        var response=$http.post(Appname+"/Set_premises/",data);
        return response;
    }
    this.get_session_expense = function (data) {
        var response=$http.post(Appname+"/Session_Get_Expnese_Data/",data);
        return response;
    }
     this.premises_process_get=function (data) {
        var response=$http.post(Appname+"/Get_premises/",data);
        return response;
    }






 });


































































































</script>
<style>
    .app-modal-window .modal-dialog {
    width: 1000px;
}

.md-virtual-repeat-container.md-autocomplete-suggestions-container {
     width:500px !important;
}


.C{
 background-color: #B3FFC1 !important;
}

.D{
 background-color: #FFBDF3 !important;
}



































































































</style>
{% endblock %}