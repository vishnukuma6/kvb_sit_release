{% extends 'Shared/mainLayout.html' %}
{% load static from staticfiles %}
{% block title %} Asset Query  {% endblock %}
{% csrf_token %}
{% block content %}
{% verbatim %}
<div class="maincontent">
    <div class="container1"
         style="width:1400px;padding-right:15px;padding-left:15px;margin-right:auto;margin-left:auto;"
         ng-app="dateapp" ng-controller="datectrl" ng-cloak>
        <div class="row">
            <div class="row-header col-lg-12 col-sm-12">
                <h4>Asset Query - AQ</h4>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="row">
                    <div class="col-md-12">
                        <div class="col-md-3">
                            <md-input-container class="md-block inputcontainer">
                                <label>Asset Id</label>
                                <input maxlength="30" ng-model="asset_id"
                                       placeholder="Asset id"
                                       type="text"/>
                            </md-input-container>
                        </div>
                        <div class="col-md-3">
                            <label>Category</label>
                            <md-autocomplete
                                    md-no-cache="true"
                                    md-selected-item="selectedcat"
                                    md-search-text="searchcat"
                                    md-selected-item-change="selectchange(item)"
                                    md-items="item in catsearch(searchcat)"
                                    md-item-text="item.assetcat_subcatname"
                                    md-min-length=0
                                    placeholder="Category">
                                <md-item-template>
                                    <span md-highlight-text="searchText"> {{item.assetcat_subcatname}} </span>
                                </md-item-template>
                                <md-not-found>
                                    No Catagory matching "{{searchText}}" were found.
                                </md-not-found>
                            </md-autocomplete>
                        </div>
                        <div class="col-md-3">
                            <label>Branch</label>
                            <md-autocomplete
                                    md-clear-button="true"
                                    md-input-maxlength=126
                                    md-item-text="item.branch_name"
                                    md-items="item in querySearchs(searchbr)"
                                    md-min-length=0
                                    md-no-cache="true"
                                    md-search-text="searchbr"
                                    md-selected-item="selectedbr"
                                    md-selected-item-change="branch_change(item)"
                                    placeholder="Branch">
                                <md-item-template>
                                    <span md-highlight-text="searchTe"> {{item.branch_name}} </span>
                                </md-item-template>
                                <md-not-found>
                                    No Branch matching "{{searchTe}}" were found.
                                </md-not-found>
                            </md-autocomplete>
                        </div>
                        <!--                        <div class="col-md-3">-->
                        <!--                            <label>Location</label>-->
                        <!--                            <md-autocomplete-->
                        <!--                                    md-clear-button="true"-->
                        <!--                                    md-input-maxlength=126-->
                        <!--                                    md-item-text="item.assetlocation_name"-->
                        <!--                                    md-items="item in querySearch(searchloc)"-->
                        <!--                                    md-min-length=0-->
                        <!--                                    md-no-cache="true"-->
                        <!--                                    md-search-text="searchloc"-->
                        <!--                                    md-selected-item="selectedloc"-->
                        <!--                                    md-selected-item-change="loc_change(item)"-->
                        <!--                                    placeholder="Location">-->
                        <!--                                <md-item-template>-->
                        <!--                                    <span md-highlight-text="searchTe"> {{item.assetlocation_name}} -&#45;&#45; {{item.assetlocation_floor}} </span> </span>-->
                        <!--                                </md-item-template>-->
                        <!--                                <md-not-found>-->
                        <!--                                    No Location matching "{{searchTe}}" were found.-->
                        <!--                                </md-not-found>-->
                        <!--                            </md-autocomplete>-->
                        <!--                        </div>-->
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="row-header col-lg-12 col-sm-12">
                <div class="col-md-3" style="margin-top:12px">
                    <md-button class="  " ng-click="advance_search()">
                        Filter
                        <md-icon>tune</md-icon>
                        <md-tooltip>Filter</md-tooltip>
                    </md-button>
                </div>
                <div class="col-md-6">
                    <md-input-container>
                        <label>Total Count</label>
                        <md-select ng-model="selectedcount"
                                   md-on-close="clearSearchTerm()"
                                   data-md-container-class="selectdemoSelectHeader"
                                   multiple>
                            <md-select-header class="demo-select-header">
                                <input ng-model="searchTerm"
                                       type="search"
                                       placeholder="Search for a Count.."
                                       class="demo-header-searchbox md-text">
                            </md-select-header>
                            <md-optgroup label="Stream">
                                <md-option ng-value="data" ng-repeat="data in Datas |
              filter:searchTerm">{{data.title}}
                                </md-option>
                            </md-optgroup>
                        </md-select>
                    </md-input-container>
                </div>
                <div class="col-md-3">
                    <md-button class="md-fab md-mini md-primary custbutton" ng-click="search()">
                        <md-icon>search</md-icon>
                        <md-tooltip>Search</md-tooltip>
                    </md-button>
                </div>
            </div>
        </div>
        <div class="row" ng-show="advanced_srch">
            <div class="col-md-12">
                <div class="row">
                    <div class="col-lg-12 col-sm-12">
                        <div class="row table-responsive">
                            <div class="col-md-12 col-lg-12 col-sm-12">
                                <fieldset
                                        data-ng-repeat="choice in choices.slice(((currentPage-1)*itemsPerPage), ((currentPage)*itemsPerPage))">
                                    <div class="row">
                                        <div class="col-md-3" style="margin-top:8px" ng-show="choice.show_option">
                                            <md-autocomplete
                                                    md-clear-button="true"
                                                    md-input-maxlength=126
                                                    md-item-text="item.title"
                                                    md-items="item in querySearchopt(searchopt)"
                                                    md-min-length=0
                                                    md-no-cache="true"
                                                    md-search-text="searchopt"
                                                    md-selected-item="choice.selectedopt"
                                                    md-selected-item-change="option_change(item,$index)"
                                                    placeholder="Choose Option">
                                                <md-item-template>
                                                    <span md-highlight-text="searchTe"> {{item.title}} </span>
                                                </md-item-template>
                                                <md-not-found>
                                                    No Option matching "{{searchopt}}" were found.
                                                </md-not-found>
                                            </md-autocomplete>
                                        </div>
                                        <div ng-show="choice.cap_date">
                                            <div class="col-md-3">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>Cap Date From</label>
                                                    <md-datepicker md-hide-icons="calendar"
                                                                   md-open-on-focus
                                                                   ng-change="cap_change_fr($index)"
                                                                   ng-model="choice.cap_from_date"></md-datepicker>
                                                </md-input-container>
                                            </div>
                                            <div class="col-md-3">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>Cap Date To</label>
                                                    <md-datepicker md-hide-icons="calendar"
                                                                   md-open-on-focus
                                                                   ng-change="cap_change_to($index)"
                                                                   ng-model="choice.cap_to_date"></md-datepicker>
                                                </md-input-container>
                                            </div>
                                        </div>
                                        <div ng-show="choice.transfer_branch">
                                            <div class="col-md-3" style="margin-top:8px">
                                                <md-autocomplete
                                                        md-clear-button="true"
                                                        md-input-maxlength=126
                                                        md-item-text="item.branch_name"
                                                        md-items="item in querySearchs(searchfr_br)"
                                                        md-min-length=0
                                                        md-no-cache="true"
                                                        md-search-text="searchfr_br"
                                                        md-selected-item="selectedfr_br"
                                                        md-selected-item-change="tr_branch_frchange(item)"
                                                        placeholder="From Branch">
                                                    <md-item-template>
                                                        <span md-highlight-text="searchTe"> {{item.branch_name}} </span>
                                                    </md-item-template>
                                                    <md-not-found>
                                                        No From Branch matching "{{searchfr_br}}" were found.
                                                    </md-not-found>
                                                </md-autocomplete>
                                            </div>
                                            <div class="col-md-3" style="margin-top:8px">
                                                <md-autocomplete
                                                        md-clear-button="true"
                                                        md-input-maxlength=126
                                                        md-item-text="item.branch_name"
                                                        md-items="item in querySearchs(searchto_br)"
                                                        md-min-length=0
                                                        md-no-cache="true"
                                                        md-search-text="searchto_br"
                                                        md-selected-item="selectedto_br"
                                                        md-selected-item-change="tr_branch_tochange(item)"
                                                        placeholder="TO Branch">
                                                    <md-item-template>
                                                        <span md-highlight-text="searchTe"> {{item.branch_name}} </span>
                                                    </md-item-template>
                                                    <md-not-found>
                                                        No TO Branch matching "{{searchto_br}}" were found.
                                                    </md-not-found>
                                                </md-autocomplete>
                                            </div>
                                        </div>
                                        <div ng-show="choice.asset_enddate">
                                            <div class="col-md-3">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>Asset End From Date</label>
                                                    <md-datepicker md-hide-icons="calendar"
                                                                   md-open-on-focus
                                                                   ng-change="life_from($index)"
                                                                   ng-model="choice.lifetime_frdate"></md-datepicker>
                                                </md-input-container>
                                            </div>
                                            <div class="col-md-3">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>Asset End To Date</label>
                                                    <md-datepicker md-hide-icons="calendar"
                                                                   md-open-on-focus
                                                                   ng-change="life_to($index)"
                                                                   ng-model="choice.lifetime_todate"></md-datepicker>
                                                </md-input-container>
                                            </div>
                                        </div>
                                        <div ng-show="choice.ins_date">
                                            <div class="col-md-3">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>Invoice Date</label>
                                                    <md-datepicker md-hide-icons="calendar"
                                                                   md-open-on-focus
                                                                   ng-change="invs_date($index)"
                                                                   ng-model="choice.inv_date"></md-datepicker>
                                                </md-input-container>
                                            </div>
                                        </div>
                                        <div ng-show="choice.asset_leasedate">
                                            <div class="col-md-3">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>Asset Lease From Date</label>
                                                    <md-datepicker md-hide-icons="calendar"
                                                                   md-open-on-focus
                                                                   ng-change="lease_from($index)"
                                                                   ng-model="choice.asset_lease_frdate"></md-datepicker>
                                                </md-input-container>
                                            </div>
                                            <div class="col-md-3">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>Asset Lease TO Date</label>
                                                    <md-datepicker md-hide-icons="calendar"
                                                                   md-open-on-focus
                                                                   ng-change="lease_to($index)"
                                                                   ng-model="choice.asset_lease_todate"></md-datepicker>
                                                </md-input-container>
                                            </div>
                                        </div>
                                        <div ng-show="choice.po_no_enter">
                                            <div class="col-md-3">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>PO No</label>
                                                    <input maxlength="30" ng-model="choice.po_no" numbers-only
                                                           ng-change="po_no_change($index)"
                                                           placeholder="PO No"
                                                           type="text"/>
                                                </md-input-container>
                                            </div>
                                        </div>
                                        <div ng-show="choice.mep_no_enter">
                                            <div class="col-md-3">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>MEP No</label>
                                                    <input maxlength="30" ng-model="choice.mep_no" numbers-only
                                                           ng-change="mep_no_change($index)"
                                                           placeholder="MEP No"
                                                           type="text"/>
                                                </md-input-container>
                                            </div>
                                        </div>
                                        <div ng-show="choice.invoice_no_enter">
                                            <div class="col-md-3">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>Invoice NO</label>
                                                    <input maxlength="30" ng-model="choice.invoice_no" numbers-only
                                                           ng-change="invoice_no_change($index)"
                                                           placeholder="Invoice NO"
                                                           type="text"/>
                                                </md-input-container>
                                            </div>
                                        </div>
                                        <div ng-show="choice.asset_value">
                                            <div class="col-md-3">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>Asset From Value</label>
                                                    <input maxlength="30" ng-model="choice.asset_value_fr" numbers-only
                                                           ng-change="asset_value_fr_change($index)"
                                                           placeholder="Asset From Value"
                                                           type="text"/>
                                                </md-input-container>
                                            </div>
                                            <div class="col-md-3">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>Asset TO Value</label>
                                                    <input maxlength="30" ng-model="choice.asset_value_to" numbers-only
                                                           ng-change="asset_value_to_change($index)"
                                                           placeholder="Asset To Value"
                                                           type="text"/>
                                                </md-input-container>
                                            </div>
                                        </div>
                                        <div ng-show="choice.invoice_amt_enter">
                                            <div class="col-md-3">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>Invoice Amount</label>
                                                    <input maxlength="30" ng-model="choice.invoice_amt" numbers-only
                                                           placeholder="Invoice Amount"
                                                           ng-change="invoice_amt_change($index)"
                                                           type="text"/>
                                                </md-input-container>
                                            </div>
                                        </div>
                                        <div ng-show="choice.vendor_name_enter">
                                            <div class="col-md-3">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>Vendor Name</label>
                                                    <input maxlength="30" ng-model="choice.vendor_name"
                                                           ng-change="vendor_name_change($index)"
                                                           placeholder="Vendor Name"
                                                           type="text"/>
                                                </md-input-container>
                                            </div>
                                        </div>
                                        <div ng-show="choice.dep_hold_enter">
                                            <div class="col-md-3">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>Depreciation Hold</label>
                                                    <input maxlength="30" ng-model="choice.dep_hold"
                                                           ng-change="dep_hold_change($index)"
                                                           placeholder="Depreciation Hold"
                                                           type="text"/>
                                                </md-input-container>
                                            </div>
                                        </div>
                                        <div class="col-md-3">
                                            <md-button class="md-fab md-mini md-primary custbutton"
                                                       ng-show="$last"
                                                       ng-click="removeChoice()">
                                                <md-icon>close</md-icon>
                                                <md-tooltip>Remove</md-tooltip>
                                            </md-button>
                                        </div>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                        <md-button class="md-fab md-mini md-primary custbutton" ng-disabled="add_asset"
                                   ng-click="addNewChoice()">
                            <md-icon>add</md-icon>
                            <md-tooltip>Create Asset</md-tooltip>
                        </md-button>
                    </div>
                </div>
            </div>
        </div>
        <br/>
        <div class="row table-responsive" ng-show="no_count">
            <div class="col-md-12 col-lg-12 col-sm-12">
                <table class="table table-striped table-bordered table-condensed table-hover md-primary">
                    <thead class="header">
                    <th scope="col" class="text-center">S.No</th>
                    <th scope="col" class="text-center"><a
                            ng-click="orderByField='asset_id'; reverseSort = !reverseSort"
                            style="color:white">Asset Id
                        <span ng-show="orderByField == 'asset_id'"><span></span></span>
                    </a></th>
                    <th scope="col" class="text-center">Asset
                        Tran Id</th>
                    <th scope="col" class="text-center">Status</th>
                    <th scope="col" class="text-center">Asset
                        Grp Id</th>
                    <th scope="col" class="text-center">Expense
                        Cat Name</th>
                    <th scope="col" class="text-center">Expense
                        SubCat Name</th>
                    <th scope="col" class="text-center">Expense GL</th>
                    <th scope="col" class="text-center">Product Name</th>
<!--                    <th scope="col" class="text-center">Category</th>-->
                    <th scope="col" class="text-center">Capitalization Date</th>
                    <th scope="col" class="text-center">Asset Value</th>
                    <th scope="col" class="text-center">PO Number</th>
                    <th scope="col" class="text-center">Invoice No</th>
                    <th scope="col" class="text-center">Invoice Date</th>
                    <th scope="col" class="text-center">Vendor Name</th>
                    <th scope="col" class="text-center">Branch</th>
                    <!--                    <th scope="col" class="text-center">Location</th>-->
                    <th scope="col" class="text-center">Asset EndDate</th>

                    <!--                    <th scope="col" class="text-center">Action</th>-->
                    </thead>

                    <tbody>
                    <tr ng-repeat="ast in asset | orderBy:orderByField:reverseSort">
                        <td class="text-center">
                            <center>{{ast.index}}</center>
                        </td>
                        <td class="text-center" ng-click="imgshow($index)">{{ast.asst_id}}</td>
                        <td class="text-center" ng-click="imgshow($index)">{{ast.assetdetails_id}}</td>
                        <td class="text-left">{{ast.assetdetails_status}}</td>
                        <td class="text-left">{{ast.assetgroup_no}}</td>
                        <td class="text-left">{{ast.ap_cat_name}}</td>
                        <td class="text-left">{{ast.ap_subcat_name}}</td>
                        <td class="text-right">{{ast.ap_subcat_glno}}</td>
                        <td class="text-left">{{ast.product_name}}</td>
<!--                        <td class="text-left">{{ast.assetcat_subcatname}}</td>-->
                        <td class="text-center">{{ast.cp_date}}</td>
<!--                        <td class="text-right">{{ast.assetdetails_value | number : fractionSize}}</td>-->
                        <td class="text-right"><span class="editlink" ng-click="loading_popup(ast.assetdetails_gid)">{{ast.assetdetails_value | number : fractionSize}}</span></td>
                        <td class="text-right">{{ast.poheader_no}}</td>
                        <td class="text-right">{{ast.invoiceheader_invoiceno}}</td>
                        <td class="text-left">{{ast.inv_date}}</td>
                        <td class="text-left" style="width:150px">{{ast.assetdetails_vendorname}}</td>
                        <td class="text-left" >{{ast.branch_name}} - {{ast.branch_code}}</td>
                        <!--                        <td class="text-left" >{{ast.location_name}}</td>-->
                        <td class="text-left">{{ast.assetdetails_enddate}}</td>

                        <!--                        <td class="text-center"><span class="editlink" ng-click="viewdet(ast)">View</span></td>-->
                    </tr>
                    <tr ng-show="warning">
                        <td class="warning" colspan="17">
                            No Records Found.
                        </td>
                    </tr>
                    </tbody>
                    <tfoot>
                    <tr>
                        <td colspan="15">
                            <ul boundary-links="true" class="pagination-sm cust_pagination"
                                items-per-page="itemsPerPage"
                                max-size="maxSize"
                                ng-change="search()"
                                ng-model="currentPage" total-items="pageLength"
                                uib-pagination></ul>
                        </td>
                        <td colspan="1">
                            <label>Page Count:</label>
                            <select type="text" style="width:100px;"
                                    class="form-control" placeholder="count"
                                    ng-model="itemsPerPage">
                                <option ng-value="10">10</option>
                                <option ng-value="20">20</option>
                                <option ng-value="50">50</option>
                                <option ng-value="100">100</option>
                                <option ng-value="150">150</option>
                                <option ng-value="200">200</option>
                            </select>
                        </td>
                        <td colspan="1" class="text-left">
                            <span>Total Count:<br/> <b class="text-centre"> {{pageLength}}</b></span>
                        </td>
                    </tr>
                    </tfoot>
                </table>
            </div>
        </div>
        <div class="row table-responsive" ng-show="count_data">
            <div class="col-md-12 col-lg-12 col-sm-12">
                <table class="table table-striped table-bordered table-condensed table-hover md-primary">
                    <thead class="header">
                    <th scope="col" class="text-center">S.No</th>
                    <th scope="col" class="text-center" ng-show="cap_show">Cap Date Count</th>
                    <th scope="col" class="text-center" ng-show="cat_show">Category Count</th>
                    <th scope="col" class="text-center" ng-show="write_show">Writeoff Count</th>
                    <th scope="col" class="text-center" ng-show="write_show">Writeoff Value</th>
                    <th scope="col" class="text-center" ng-show="impair_show">Impairment Count</th>
                    <th scope="col" class="text-center" ng-show="impair_show">Impairment Value</th>
                    <th scope="col" class="text-center" ng-show="value_show">Value Change Count</th>
                    <th scope="col" class="text-center" ng-show="value_show">Value Change Value</th>
                    <th scope="col" class="text-center" ng-show="merge_data">Merge Count</th>
                    <th scope="col" class="text-center" ng-show="merge_data">Merge Value</th>
                    <th scope="col" class="text-center" ng-show="split_data">Split Count</th>
                    <th scope="col" class="text-center" ng-show="split_data">Split Value</th>
                    <th scope="col" class="text-center" ng-show="transfer_data">Transfer Count</th>
                    <th scope="col" class="text-center" ng-show="transfer_data">Transfer Value</th>
                    <th scope="col" class="text-center" ng-show="sale_data">Sale Count</th>
                    <th scope="col" class="text-center" ng-show="sale_data">Sale Value</th>
                    </thead>

                    <tbody>
                    <tr ng-repeat="ast in asset.slice(((currentPage-1)*itemsPerPage), ((currentPage)*itemsPerPage)) | orderBy:orderByField:reverseSort">
                        <td class="text-center">
                            <center>{{((currentPage-1)*itemsPerPage)+$index+1}}</center>
                        </td>
                        <td class="text-center" ng-show="cap_show">{{ast.cp_count}}</td>
                        <td class="text-center" ng-show="cat_show">{{ast.catchange_count}}</td>
                        <td class="text-center" ng-show="write_show">{{ast.write_count}}</td>
                        <td class="text-center" ng-show="write_show">{{ast.write_value}}</td>
                        <td class="text-center" ng-show="impair_show">{{ast.impair_count}}</td>
                        <td class="text-center" ng-show="impair_show">{{ast.impair_value}}</td>
                        <td class="text-center" ng-show="value_show">{{ast.value_count}}</td>
                        <td class="text-center" ng-show="value_show">{{ast.value_value}}</td>
                        <td class="text-center" ng-show="merge_data">{{ast.merge_count}}</td>
                        <td class="text-center" ng-show="merge_data">{{ast.merge_value}}</td>
                        <td class="text-center" ng-show="split_data">{{ast.split_count}}</td>
                        <td class="text-center" ng-show="split_data">{{ast.split_value}}</td>
                        <td class="text-center" ng-show="transfer_data">{{ast.transfer_count}}</td>
                        <td class="text-center" ng-show="transfer_data">{{ast.transfer_value}}</td>
                        <td class="text-center" ng-show="sale_data">{{ast.sale_count}}</td>
                        <td class="text-center" ng-show="sale_data">{{ast.sale_value}}</td>
                    </tr>
                    <tr ng-show="warning">
                        <td class="warning" colspan="17">
                            No Records Found.
                        </td>
                    </tr>
                    </tbody>
                    <tfoot>
                    <tr>
                        <td colspan="{{ table_width }}">
                            <ul boundary-links="true" class="pagination-sm cust_pagination"
                                items-per-page="itemsPerPage"
                                max-size="maxSize"
                                ng-model="currentPage" total-items="pageLength"
                                uib-pagination></ul>
                        </td>
                        <td colspan="2" class="text-left">
                            <span>Total Count:<br/> <b class="text-centre"> {{asset.length}}</b></span>
                        </td>
                    </tr>
                    </tfoot>
                </table>
            </div>
        </div>
        <div class="text-center" ng-show="reasons">
            <md-dialog>
                <md-content>
                    <h4>
                        Reason : {{assetsale_reason}}
                    </h4>
                </md-content>
            </md-dialog>
        </div>
        <!--popup page start-->
           <div aria-hidden="" aria-labelledby="exampleModalLabel"
             class="modal fade"
             data-backdrop="" data-keyboard="false"
             id="Modal_asset_ae">
            <div class="modal-dialog modal-md modal-style" role="document">
                <div class="modal-content">
                    <div class="header">
                        <div class="modal-header popup-header">
                            <h5 class="modal-title" id="exampleModalLabels">
                                <strong>Accounting Details</strong>
                                <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </h5>
                        </div>
                    </div>
                    <div class="body">
                        <div class="modal-body popup-body">
                            <div class="row table-responsive">
                                <div class="col-md-12 col-lg-12 col-sm-12">
                                        <table class="table table-striped table-bordered table-condensed table-hover md-primary">
                                            <thead class="header">
                                             <th class="text-center" scope="col">S.No</th>
                                            <th class="text-center">Entry Financial Year</th>
                                            <th class="text-center">Entry Screen</th>
                                            <th class="text-center">WiseFin GL</th>
                                            <th class="text-center">Entry GL</th>
                                            <th class="text-center">C/D</th>
                                            <th class="text-right">Amount</th>
                                            </thead>
                                            <tbody>
                                           <tr ng-repeat=" ae in assetae " >
                                                <td class="text-center">
                                                    <center>{{((currentPage-1)*itemsPerPage)+$index+1}}</center>
                                                </td>
                                               <td class="text-center">{{ae.entry_fiscalyear}}</td>
                                               <td class="text-left">{{ae.entry_screen}}</td>
                                               <td class="text-right">{{ae.wisefingl}}</td>
                                               <td class="text-right">{{ae.entry_gl}}</td>
                                               <td class="text-center">{{ae.entry_type}}</td>
                                               <td class="text-right">{{ae.entry_amt}}</td>
                                           </tr>
                                            </tbody>
                                        </table>
                                </div>
                            </div>
                             <div class="row">
                                    <div class="col-md-12">
                                        <div class="col-md-6"></div>
                                        <div class="col-md-6">
                                            <h4>Sum Of Debits:{{db_tot}}</h4>
                                        </div>

                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="col-md-6"></div>
                                        <div class="col-md-6">
                                            <h4>Sum of Credits:{{db_tot}}</h4>
                                        </div>
                                    </div>
                                </div>
                            <div class="row">
                                <div class="col-lg-10 col-sm-10">
                                    <div class="col-md-5">
                                               <md-button class="md-raised md-warn" ng-click="expense_click()"

                                                                   type="button"
                                                                   value="Expense">Expense
                                                        </md-button>
                                    </div>
                                    <div class="col-md-5">
                                        <md-button class="md-raised" data-dismiss="modal">Close
                                            <md-tooltip>close</md-tooltip>
                                        </md-button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <!--popup page End-->
        <!--        Expense-->

           <div aria-hidden="" aria-labelledby="exampleModalLabel"
             class="modal fade"
             data-backdrop="" data-keyboard="false"
             id="Modal_expense">
            <div class="modal-dialog modal-md modal-style" role="document">
                <div class="modal-content">
                    <div class="header">
                        <div class="modal-header popup-header">
                            <h5 class="modal-title" id="exampleModalLabels">
                                <strong>Expense Details</strong>
                                <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </h5>
                        </div>
                    </div>
                    <div class="body">
                        <div class="modal-body popup-body">
                            <div class="row table-responsive">
                                <div class="col-md-12 col-lg-12 col-sm-12">
                                        <table class="table table-striped table-bordered table-condensed table-hover md-primary">
                                            <thead class="header">
                                            <th class="text-center" scope="col">S.No</th>
                                            <th class="text-center">Entry Financial Year</th>
                                            <th class="text-center">Entry Screen</th>
                                            <th class="text-center">WiseFin GL</th>
                                            <th class="text-center">Entry GL</th>
                                            <th class="text-center">C/D</th>
                                            <th class="text-right">Amount</th>
                                            </thead>
                                            <tbody>
                                           <tr ng-repeat=" ae in expense_data">
                                                <td class="text-center">
                                                    <center>{{$index+1}}</center>
                                                </td>
                                               <td class="text-center">{{ae.entry_module}}</td>
                                               <td class="text-left">{{ae.entry_screen}}</td>
                                               <td class="text-right">{{ae.wisefingl}}</td>
                                               <td class="text-right">{{ae.entry_gl}}</td>
                                               <td class="text-center">{{ae.entry_type}}</td>
                                               <td class="text-right">{{ae.entry_amt}}</td>
                                           </tr>
                                            </tbody>
                                        </table>
                                </div>
                            </div>
                             <div class="row">
                                    <div class="col-md-12">
                                        <div class="col-md-6"></div>
                                        <div class="col-md-6">
                                            <h4>Sum Of Debits:{{db_tot}}</h4>
                                        </div>

                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-12">
                                        <div class="col-md-6"></div>
                                        <div class="col-md-6">
                                            <h4>Sum of Credits:{{db_tot}}</h4>
                                        </div>
                                    </div>
                                </div>
                            <div class="row">
                                <div class="col-lg-10 col-sm-10">
                                    <div class="col-md-5">
                                    </div>
                                    <div class="col-md-5">
                                        <md-button class="md-raised" data-dismiss="modal">Close
                                            <md-tooltip>close</md-tooltip>
                                        </md-button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
<!--        expense over-->

        <!--        popup image start-->
        <div aria-hidden="true" aria-labelledby="exampleLabel" class="modal fade" data-backdrop="static"
             data-keyboard="false"
             id="imagemodal" role="dialog"
             style="height:auto;width:100%" tabindex="-1">
            <div class="modal-dialog modal-lg modal-style" role="document">
                <div class="modal-content">
                    <div class="header">
                        <div class="modal-header popup-header">
                            <h5 class="modal-title" id="exampleLabel">
                                <strong>Asset Image</strong>
                                <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </h5>
                        </div>
                    </div>
                </div>
                <div class="body">
                    <div class="modal-body popup-body">
                        <div class="row">
                            <div class="col-md-12 col-lg-12 col-sm-12">
                                <div class="text-center">
                                    <img src="{{asset_img}}" style="width:400px;height:400px"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--        popup image end-->
          <!--popup page start-->
        <div aria-hidden="true" aria-labelledby="exampleModalLabel" class="modal fade" data-backdrop="static"
             data-keyboard="false"
             id="viewmodal" role="dialog"
             style="height:auto;width:100%" tabindex="-1">
            <div class="modal-dialog modal-lg modal-style" role="document">
                <div class="modal-content">
                    <div class="header">
                        <div class="modal-header popup-header">
                            <h5 class="modal-title" id="exampleModalLabel">
                                <strong>Asset Add For {{ invoice_supplier }}</strong>
                                <button aria-label="Close" class="close" data-dismiss="modal" type="button">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </h5>
                        </div>
                    </div>
                    <md-content>
                        <md-tabs md-dynamic-height md-border-bottom ng-init="label ='Invoice'">
                            <md-tab label="Invoice">
                                <md-content class="md-padding">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <md-subheader class="md-accent">Invoice Details</md-subheader>
                                        </div>
                                    </div>
                                    <md-card style="background-color:#8dbed6;">
                                        <md-card-content>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="col-md-3">
                                                        <b>Invoice Tax Amt : &#8377; {{invoice_taxamt | number : 0}}</b>
                                                    </div>
                                                    <div class="col-md-3">
                                                        <b>Total Amt for Captalize :
                                                            <span>&#8377; {{ invoice_totalamt | number : 0}} </span></b>
                                                    </div>
                                                    <div class="col-md-3">
                                                    </div>
                                                    <div class="col-md-2" ng-show="cwip_data">
                                                        <md-checkbox ng-model="singleasset" aria-label="Single Asset ">
                                                            Single Asset : {{ singleasset }}
                                                        </md-checkbox>
                                                    </div>
                                                    <div ng-show="regular_location">
                                                        <div class="col-md-1">
                                                            <md-button class="md-fab md-mini md-primary custbutton"
                                                                       ng-click="location_pop()">
                                                                <md-icon class="material-icons editlink">location_on
                                                                </md-icon>
                                                                <md-tooltip>location add</md-tooltip>
                                                            </md-button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="col-md-3">
                                                        <md-input-container class="md-block inputcontainer"
                                                                            ng-show="invoice">
                                                            <md-radio-group layout="row" ng-change="mode_choose()"
                                                                            ng-init="option_mode = 'Regular'"
                                                                            ng-model="option_mode">
                                                                <md-radio-button checked ng-selected="true"
                                                                                 value="Regular">
                                                                    Regular
                                                                </md-radio-button>
                                                                <md-radio-button value="CWIP">CWIP</md-radio-button>
                                                            </md-radio-group>
                                                        </md-input-container>
                                                    </div>
                                                    <!--                            <div class="col-md-2">-->
                                                    <!--                                <md-checkbox ng-show="hide"-->
                                                    <!--                                             ng-model="other_expence"-->
                                                    <!--                                             aria-label="Checkbox 2"-->
                                                    <!--                                             ng-true-value="'YES'"-->
                                                    <!--                                             ng-false-value="'NO'" flex>Other Expence-->
                                                    <!--                                </md-checkbox>-->
                                                    <!--                            </div>-->
                                                    <div ng-show="hide">
                                                        <md-input-container class="md-block inputcontainer">
                                                            <md-radio-group layout="row" ng-change=""
                                                                            ng-init="option_radio = 'Without_Tax'"
                                                                            ng-model="option_radio">
                                                                <md-radio-button value="Tax">WithTax
                                                                </md-radio-button>
                                                                <md-radio-button checked ng-selected="true"
                                                                                 value="Without_Tax">
                                                                    Without
                                                                    Tax
                                                                </md-radio-button>
                                                            </md-radio-group>
                                                        </md-input-container>
                                                    </div>
                                                    <div class="col-md-3" ng-show="enable_regular"
                                                         style="margin-top:12px">
                                                        <md-autocomplete
                                                                md-clear-button="true"
                                                                md-input-maxlength=126
                                                                md-item-text="item.bs_name"
                                                                md-items="item in querySearchbs(search_bs)"
                                                                md-min-length=0
                                                                md-no-cache="true"
                                                                md-search-text="search_bs"
                                                                md-selected-item="selectedbs"
                                                                md-selected-item-change="bschange(item)"
                                                                placeholder="Select BS">
                                                            <md-item-template>
                                                                <span md-highlight-text="searchTe">{{item.bs_name}} - {{item.bs_code}}</span>
                                                            </md-item-template>
                                                            <md-not-found>
                                                                No BS matching "{{searchTe}}" were found.
                                                            </md-not-found>
                                                        </md-autocomplete>
                                                    </div>
                                                    <div class="col-md-3" ng-show="enable_regular"
                                                         style="margin-top:12px">
                                                        <md-autocomplete
                                                                md-clear-button="true"
                                                                md-input-maxlength=126
                                                                md-item-text="item.cc_name"
                                                                md-items="item in querySearchcc(search_cc)"
                                                                md-min-length=0
                                                                md-no-cache="true"
                                                                ng-disabled="no_ccdata"
                                                                md-search-text="search_cc"
                                                                md-selected-item="selectedcc"
                                                                md-selected-item-change="ACselectchange(item)"
                                                                placeholder="Select CC">
                                                            <md-item-template>
                                                                <span md-highlight-text="searchTe">{{item.cc_name}} - {{item.cc_code}} </span>
                                                            </md-item-template>
                                                            <md-not-found>
                                                                No CC matching "{{searchTe}}" were found.
                                                            </md-not-found>
                                                        </md-autocomplete>
                                                    </div>
                                                    <div ng-show="regular_location">
                                                        <div class="col-md-3" style="margin-top:12px">
                                                            <md-autocomplete
                                                                    md-clear-button="true"
                                                                    md-input-maxlength=126
                                                                    md-item-text="item.assetlocation_name"
                                                                    md-items="item in querySearch(searchTe)"
                                                                    md-min-length=0
                                                                    md-no-cache="true"
                                                                    md-search-text="searchTe"
                                                                    md-selected-item="selectedloc"
                                                                    md-selected-item-change="ACselectchange(item)"
                                                                    placeholder="Location">
                                                                <md-item-template>
                                                                    <span md-highlight-text="searchTe"> {{item.assetlocation_name}} </span>
                                                                </md-item-template>
                                                                <md-not-found>
                                                                    No Location matching "{{searchTe}}" were found.
                                                                </md-not-found>
                                                            </md-autocomplete>
                                                        </div>
                                                    </div>
                                                    <div ng-show="cwip_grp">
                                                        <div class="col-md-3" style="margin-top:12px">
                                                            <md-autocomplete
                                                                    md-clear-button="true"
                                                                    md-input-maxlength=126
                                                                    md-item-text="item.cwipgroup_name"
                                                                    md-items="item in querySearchgrp(searchgrp)"
                                                                    md-min-length=0
                                                                    md-no-cache="true"
                                                                    md-search-text="searchgrp"
                                                                    md-selected-item="selectedgrp"
                                                                    md-selected-item-change="ACselectchange(item)"
                                                                    placeholder="CWIP Group">
                                                                <md-item-template>
                                                                    <span md-highlight-text="searchTe"> {{item.cwipgroup_name}} </span>
                                                                </md-item-template>
                                                                <md-not-found>
                                                                    No CWIP Group matching "{{searchTe}}" were
                                                                    found.
                                                                </md-not-found>
                                                            </md-autocomplete>
                                                        </div>
                                                    </div>
                                                    <div class="col-md-3" ng-show="cwip_grp">
                                                        <md-button class="md-fab md-mini md-primary custbutton"
                                                                   ng-click="add_cwipgrp()">
                                                            <md-icon class="material-icons editlink">add</md-icon>
                                                            <md-tooltip>CWIP Group add</md-tooltip>
                                                        </md-button>
                                                    </div>
                                                </div>
                                            </div>
                                        </md-card-content>
                                    </md-card>
                                    <md-card>
                                        <md-card-content>
                                            <div class="body">
                                                <div class="modal-body popup-body">
                                                    <div class="row">
                                                        <div class="col-lg-12 col-sm-12" ng-show="enable_regular">
                                                            <div class="row table-responsive">
                                                                <div class="col-md-12 col-lg-12 col-sm-12">
                                                                    <form name="demoForm">
                                                                        <table class="table table-striped table-bordered table-condensed table-hover md-primary">
                                                                            <thead class="header">
                                                                            <th class="text-center" scope="col">S.No
                                                                            </th>
                                                                            <th class="text-center" scope="col">Product
                                                                                Name
                                                                            </th>
                                                                            <th class="text-center" scope="col">
                                                                                Quantity
                                                                            </th>
                                                                            <th class="text-center" scope="col">Unit
                                                                                Price
                                                                            </th>
                                                                            <!--                                                    <th scope="col" class="text-center">Adjusted Quantity</th>-->
                                                                            <th class="text-center" ng-show="invoice"
                                                                                scope="col">Branch
                                                                            </th>
                                                                            <th class="text-center" ng-show="cwip_data"
                                                                                scope="col">
                                                                                Group
                                                                                Name
                                                                            </th>
                                                                            <th class="text-center" scope="col">
                                                                                Category
                                                                            </th>
                                                                            <th class="text-center" scope="col"
                                                                                title="Only Allow PNG,JPG,JPEG,PDF">
                                                                                <!--                                                        <a title="Only Allow PNG,JPG,JPEG,PDF">Image Upload</a>-->
                                                                                Image Upload
                                                                            </th>
                                                                            <th class="text-center" scope="col">Put To
                                                                                Use
                                                                                Date
                                                                            </th>
                                                                            <th class="text-center" scope="col"> Select
                                                                                <input ng-checked="checkall"
                                                                                       ng-click="selectall()"
                                                                                       ng-model="checkall"
                                                                                       type="checkbox">
                                                                            </th>
                                                                            </thead>
                                                                            <tbody>
                                                                            <tr ng-repeat="ast in invoice_asset">
                                                                                <td class="text-center"
                                                                                    style="width:20px;">
                                                                                    <center>
                                                                                        {{((Assetcrntpge-1)*Assetitmpge)+$index+1}}
                                                                                    </center>
                                                                                </td>
                                                                                <td class="text-left"
                                                                                    style="width:100px;">
                                                                                    {{ast.product_name}}
                                                                                </td>
                                                                                <td class="text-right"
                                                                                    style="width:20px;">
                                                                                    {{ast.invoicedetail_qty}}
                                                                                    <md-icon
                                                                                            ng-click="qtypop(ast,$index)"
                                                                                            ng-model="ast.color"
                                                                                            ng-show="invoice"
                                                                                            ng-style="{ color: ast.color }">
                                                                                        call_split
                                                                                    </md-icon>
                                                                                </td>
                                                                                <td class="text-right"
                                                                                    style="width:100px;">

                                                                                    <input maxlength="16"
                                                                                           numbers-only
                                                                                           class="form-control"
                                                                                           style="width:100px;"
                                                                                           ng-blur="tot_amountvalid(ast,$index)"
                                                                                           ng-model="ast.invoicedetails_unitprice"
                                                                                           type="text"/>
                                                                                </td>
                                                                                <!--                                                        <td class="text-right" style="width:20px;">-->
                                                                                <!--                                                            <input type="text" style="width:75px;" numbers-only-->
                                                                                <!--                                                                   required-->
                                                                                <!--                                                                   class="form-control" maxlength="3"-->
                                                                                <!--                                                                   ng-model="emp.grninwarddetails_qty">-->
                                                                                <!--                                                        </td>-->
                                                                                <!--                                                        <td class="col-md-3" style="width:20px;">-->
                                                                                <!--                                                            <input type="text" style="width:100px;" numbers-only-->
                                                                                <!--                                                                   required-->
                                                                                <!--                                                                   class="form-control" min="10"-->
                                                                                <!--                                                                   ng-model="emp.assetdetails_value"></td>-->
                                                                                <td class="text-left"
                                                                                    ng-show="cwip_data"
                                                                                    style="width:40px;">
                                                                                    {{ast.cwipgroup_name}}
                                                                                </td>
                                                                                <td class="text-left" ng-show="invoice"
                                                                                    style="width:40px;">
                                                                                    {{ast.branch_name}}
                                                                                    /
                                                                                    {{ast.ap_branch}}
                                                                                </td>
                                                                                <td class="text-center"
                                                                                    style="width:1000px;">
                                                                                    <md-autocomplete
                                                                                            md-clear-button="true"
                                                                                            md-item-text="item.assetcat_subcatname"
                                                                                            md-items="item in querySearchs(ast.searchcat)"
                                                                                            md-min-length=0
                                                                                            md-no-cache="true"
                                                                                            md-search-text="ast.searchcat"
                                                                                            md-selected-item="ast.selectedItem"
                                                                                            md-selected-item-change="selectchange(item)">
                                                                                        <md-item-template>
                                                                                            <span md-highlight-text="searchText"> {{item.assetcat_subcatname}} </span>
                                                                                        </md-item-template>
                                                                                        <md-not-found>
                                                                                            No Category matching
                                                                                            "{{searchText}}" were
                                                                                            found.
                                                                                        </md-not-found>
                                                                                    </md-autocomplete>

                                                                                </td>
                                                                                <td class="text-center"
                                                                                    style="width:80px;">
                                                                                    <div id="uploadFile"
                                                                                         style="width:100px;height:0px;">
                                                                                        <input accept="image/*, .zip"
                                                                                               base-sixty-four-input
                                                                                               id="file{{$index}}"
                                                                                               minnum="2" minsize="500"
                                                                                               multiple name="files"
                                                                                               ng-model="ast.fileinput"
                                                                                               onchange="angular.element(this).scope().imageUpload(event)"
                                                                                               required
                                                                                               style="width:140px;"
                                                                                               file-model="files"
                                                                                               type="file"/>
                                                                                        <!--                                                                <input type="file" file-model="files"  accept=".PDF,.pdf,.png,jpeg`"fileinput="file" id="file" multiple  required/>-->
                                                                                    </div>


                                                                                    <div class="text-right"
                                                                                         style="width:170px;height:5px;">
                                                                                        <button aria-label="Close"
                                                                                                class="btn"
                                                                                                onclick="clearFileInputField('uploadFile')"
                                                                                                style="width:10px;height:20px;">
                                                                                            X
                                                                                        </button>
                                                                                    </div>
                                                                                    &nbsp;
                                                                                    &nbsp;
                                                                                    &nbsp;
                                                                                    &nbsp;
                                                                                    &nbsp;
                                                                                    &nbsp;
                                                                                    <div ng-repeat="name in ast.filenames">
                                                                                        <a ng-click="viewimage($index)">{{name}}</a>
                                                                                    </div>
                                                                                </td>

                                                                                <td class="text-center"
                                                                                    style="width:100px;">
                                                                                    <md-datepicker formatDate
                                                                                                   md-hide-icons="calendar"
                                                                                                   md-max-date="maxDate"
                                                                                                   md-min-date="minDate"
                                                                                                   md-open-on-focus
                                                                                                   ng-init="option_radio = dbdate"
                                                                                                   ng-model="ast.cap_date"
                                                                                                   ng-required="true"></md-datepicker>
                                                                                </td>
                                                                                <td class="text-center"
                                                                                    style="width:10px;">
                                                                                    <input
                                                                                            ng-change="selectcheck($index)"
                                                                                            ng-checked="isChecked"
                                                                                            ng-click="selectEntity()"
                                                                                            ng-model="ast.isChecked"
                                                                                            type="checkbox">
                                                                                </td>
                                                                            </tr>
                                                                            <tr ng-show="invoice_asset.length ==  0">
                                                                                <td class="warning" colspan="15">
                                                                                    No Records Found.
                                                                                </td>
                                                                            </tr>
                                                                            </tbody>
                                                                            <tfoot>
                                                                            <tr>
                                                                                <td colspan="6">
                                                                                    <ul boundary-link-numbers="3"
                                                                                        class="pagination-sm cust_pagination"
                                                                                        items-per-page="Assetitmpge"
                                                                                        max-size="AssetmaxSize"
                                                                                        ng-change="paggination()"
                                                                                        ng-model="Assetcrntpge"
                                                                                        total-items="pageLength"
                                                                                        uib-pagination></ul>
                                                                                </td>
                                                                                <td colspan="1">
                                                                                    <label>Page Count:</label>
                                                                                    <select class="form-control"
                                                                                            ng-model="Assetitmpge"
                                                                                            placeholder="count"
                                                                                            style="width:100px;"
                                                                                            type="text">
                                                                                        <option ng-value="10">10
                                                                                        </option>
                                                                                        <option ng-value="20">20
                                                                                        </option>
                                                                                        <option ng-value="50">50
                                                                                        </option>
                                                                                        <option ng-value="100">100
                                                                                        </option>
                                                                                        <option ng-value="150">150
                                                                                        </option>
                                                                                        <option ng-value="200">200
                                                                                        </option>
                                                                                        <option ng-value="500">500
                                                                                        </option>
                                                                                        <option ng-value="1000">1000
                                                                                        </option>
                                                                                        <option ng-value="2000">2000
                                                                                        </option>
                                                                                        <option ng-value="5000">5000
                                                                                        </option>
                                                                                    </select>
                                                                                </td>
                                                                                <td colspan="1">
                                                                                    <p>
                                                                                        <span class="text-right">Amt Capitalised <br/> <b>  &#8377; {{finalamt | number : 0}}</b></span>
                                                                                    </p>
                                                                                </td>
                                                                                <td class="text-left" colspan="1">
                                                                                    <span>Total Count:<br/> <b> {{pageLength}}</b></span>
                                                                                </td>
                                                                            </tr>
                                                                            </tfoot>
                                                                        </table>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-lg-12 col-sm-12" ng-show="enable_cwip">
                                                            <div class="row table-responsive">
                                                                <div class="col-md-12 col-lg-12 col-sm-12">
                                                                    <form name="demoForm">
                                                                        <table class="table table-striped table-bordered table-condensed table-hover md-primary">
                                                                            <thead class="header">
                                                                            <th class="text-center" scope="col">S.No
                                                                            </th>
                                                                            <th class="text-center" scope="col">Product
                                                                                Name
                                                                            </th>
                                                                            <th class="text-center" scope="col">
                                                                                Quantity
                                                                            </th>
                                                                            <th class="text-center" scope="col">Unit
                                                                                Price
                                                                            </th>
                                                                            <!--                                                    <th scope="col" class="text-center">Adjusted Quantity</th>-->
                                                                            <th class="text-center" ng-show="invoice"
                                                                                scope="col">Branch
                                                                            </th>
                                                                            <th class="text-center" ng-show="cwip_data"
                                                                                scope="col">
                                                                                Group
                                                                                Name
                                                                            </th>
                                                                            <th class="text-center" scope="col">
                                                                                Category
                                                                            </th>
                                                                            <th class="text-center" scope="col"
                                                                                title="Only Allow PNG,JPG,JPEG,PDF">
                                                                                Image Upload
                                                                            </th>
                                                                            <th class="text-center" scope="col">Invoice
                                                                                Date
                                                                            </th>
                                                                            <th class="text-center" scope="col"> Select
                                                                                <input ng-checked="checkall"
                                                                                       ng-click="selectall()"
                                                                                       ng-model="checkall"
                                                                                       type="checkbox">
                                                                            </th>
                                                                            </thead>
                                                                            <tbody>
                                                                            <tr ng-repeat="ast in invoice_asset">
                                                                                <td class="text-center"
                                                                                    style="width:20px;">
                                                                                    <center>
                                                                                        {{((Assetcrntpge-1)*Assetitmpge)+$index+1}}
                                                                                    </center>
                                                                                </td>
                                                                                <td class="text-left"
                                                                                    style="width:100px;">
                                                                                    {{ast.product_name}}
                                                                                </td>
                                                                                <td class="text-right"
                                                                                    style="width:20px;">
                                                                                    {{ast.invoicedetail_qty}}
                                                                                    <md-icon
                                                                                            ng-click="qtypop(ast,$index)"
                                                                                            ng-model="ast.color"
                                                                                            ng-show="invoice"
                                                                                            ng-style="{ color: ast.color }">
                                                                                        call_split
                                                                                    </md-icon>
                                                                                </td>
                                                                                <td class="text-right"
                                                                                    style="width:100px;">
                                                                                    <input maxlength="10"
                                                                                           style="width:70px;"
                                                                                           ng-blur="tot_amountvalid(ast,$index)"
                                                                                           class="form-control"
                                                                                           ng-model="ast.invoicedetails_unitprice"
                                                                                           type="text"/>
                                                                                </td>
                                                                                <!--                                                        <td class="text-right" style="width:20px;">-->
                                                                                <!--                                                            <input type="text" style="width:75px;" numbers-only-->
                                                                                <!--                                                                   required-->
                                                                                <!--                                                                   class="form-control" maxlength="3"-->
                                                                                <!--                                                                   ng-model="emp.grninwarddetails_qty">-->
                                                                                <!--                                                        </td>-->
                                                                                <!--                                                        <td class="col-md-3" style="width:20px;">-->
                                                                                <!--                                                            <input type="text" style="width:100px;" numbers-only-->
                                                                                <!--                                                                   required-->
                                                                                <!--                                                                   class="form-control" min="10"-->
                                                                                <!--                                                                   ng-model="emp.assetdetails_value"></td>-->
                                                                                <td class="text-left"
                                                                                    ng-show="cwip_data"
                                                                                    style="width:40px;">
                                                                                    {{ast.cwipgroup_name}}
                                                                                </td>
                                                                                <td class="text-left" ng-show="invoice"
                                                                                    style="width:40px;">
                                                                                    {{ast.branch_name}}
                                                                                    /
                                                                                    {{ast.ap_branch}}
                                                                                </td>
                                                                                <td class="text-center"
                                                                                    style="width:100px;">
                                                                                    <md-autocomplete
                                                                                            md-clear-button="true"
                                                                                            md-item-text="item.assetcat_subcatname"
                                                                                            md-items="item in querySearchs(ast.searchcat)"
                                                                                            md-min-length=0
                                                                                            md-no-cache="true"
                                                                                            md-search-text="ast.searchcat"
                                                                                            md-selected-item="ast.selectedItem"
                                                                                            md-selected-item-change="selectchange(item)">
                                                                                        <md-item-template>
                                                                                            <span md-highlight-text="searchText"> {{item.assetcat_subcatname}} </span>
                                                                                        </md-item-template>
                                                                                        <md-not-found>
                                                                                            No Category matching
                                                                                            "{{searchText}}" were
                                                                                            found.
                                                                                        </md-not-found>
                                                                                    </md-autocomplete>

                                                                                </td>
                                                                                <td class="text-center"
                                                                                    style="width:100px;">
                                                                                    <div id="file_cwips"
                                                                                         style="width:100px;height:0px;">
                                                                                        <input base-sixty-four-input
                                                                                               id="file_cwip{{$index}}"
                                                                                               minsize="500"
                                                                                               multiple
                                                                                               onchange="angular.element(this).scope().imageUpload(event)"
                                                                                               name="files"
                                                                                               ng-change="file_namechg($index)"
                                                                                               ng-model="ast.fileinput"
                                                                                               style="width:140px;"
                                                                                               type="file"/>
                                                                                    </div>
                                                                                    <div class="text-right"
                                                                                         style="width:170px;height:5px;">
                                                                                        <button class="btn"
                                                                                                onclick="clearFileInputField('file_cwips')"
                                                                                                style="width:7px;height:20px;">
                                                                                            X
                                                                                        </button>
                                                                                    </div>
                                                                                    &nbsp;
                                                                                    &nbsp;
                                                                                    &nbsp;
                                                                                    &nbsp;
                                                                                    &nbsp;
                                                                                    &nbsp;
                                                                                    <div ng-repeat="name in ast.filenames">
                                                                                        <a ng-click="viewimage($index)">{{name}}</a>
                                                                                    </div>

                                                                                </td>
                                                                                <td class="text-center"
                                                                                    style="width:100px;">
                                                                                    <md-datepicker formatDate
                                                                                                   md-hide-icons="calendar"
                                                                                                   md-max-date="maxDate"
                                                                                                   md-min-date="minDate"
                                                                                                   md-open-on-focus
                                                                                                   ng-init="option_radio = dbdate"
                                                                                                   ng-model="ast.cap_date"
                                                                                                   ng-required="true"></md-datepicker>
                                                                                </td>
                                                                                <td class="text-center"
                                                                                    style="width:10px;">
                                                                                    <input
                                                                                            ng-change="selectcheck($index)"
                                                                                            ng-checked="isChecked"
                                                                                            ng-click="selectEntity()"
                                                                                            ng-model="ast.isChecked"
                                                                                            type="checkbox">
                                                                                </td>
                                                                            </tr>
                                                                            <tr ng-show="invoice_asset.length ==  0">
                                                                                <td class="warning" colspan="15">
                                                                                    No Records Found.
                                                                                </td>
                                                                            </tr>
                                                                            </tbody>
                                                                            <tfoot>
                                                                            <tr>
                                                                                <td colspan="7">
                                                                                    <ul boundary-link-numbers="3"
                                                                                        class="pagination-sm cust_pagination"
                                                                                        items-per-page="Assetitmpge"
                                                                                        max-size="AssetmaxSize"
                                                                                        ng-change="paggination()"
                                                                                        ng-model="Assetcrntpge"
                                                                                        total-items="pageLength"
                                                                                        uib-pagination></ul>
                                                                                </td>
                                                                                <td colspan="1">
                                                                                    <p>
                                                                                        <span class="text-right">Amt Capitalised <br/> <b>  &#8377; {{finalamt | number : 0}}</b></span>
                                                                                    </p>
                                                                                </td>
                                                                                <td class="text-left" colspan="1">
                                                                                    <span>Total Count:<br/> <b> {{pageLength}}</b></span>
                                                                                </td>
                                                                            </tr>
                                                                            </tfoot>
                                                                        </table>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </md-card-content>
                                    </md-card>
                                    <div class="row">
                                        <div class="col-md-12 text-center">
                                            <md-button class="btn btn-info custbutton" ng-click="Save(emp)"
                                                       ng-disabled="enable_update">Submit
                                                <md-tooltip>Save</md-tooltip>
                                            </md-button>
                                            <md-button class="md-raised" data-dismiss="modal">Back
                                                <md-tooltip>close</md-tooltip>
                                            </md-button>
                                        </div>
                                    </div>
                                </md-content>
                            </md-tab>
                            <md-tab label="Expense">
                                <md-content class="md-padding">
                                    <b>Invoice Total Amount :
                                        <span>&#8377; {{ invoice_totalamt | number : 0}} </span></b>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="col-md-3">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>Invoice Expense Amount</label>
                                                    <input maxlength="10"
                                                           numbers-only
                                                           ng-model="invoice_totalamts"
                                                           ng-blur="invoice_amtchange(invoice_totalamts)"
                                                           type="text"/>
                                                </md-input-container>
                                            </div>
                                            <div class="col-md-3" ng-show="invoice_amtext">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>Invoice Remaining Amount</label>
                                                    <input maxlength="10"
                                                           numbers-only
                                                           disabled
                                                           ng-model="invoice_remainamt"
                                                           ng-blur=""
                                                           type="text"/>
                                                </md-input-container>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-12">
                                            <md-subheader class="md-accent">Invoice Category,SubCategory and Gl
                                            </md-subheader>
                                            <div class="col-md-3">
                                                <label>Invoice Category </label>
                                                <md-autocomplete
                                                        md-clear-button="true"
                                                        md-item-text="item.category_name"
                                                        md-items="item in apcatsearch(searchapcat)"
                                                        md-min-length=0
                                                        md-no-cache="true"
                                                        md-search-text="searchapcat"
                                                        md-selected-item="selectedapcat"
                                                        md-selected-item-change="apcatchange(item)"
                                                        placeholder="Invoice Category">
                                                    <md-item-template>
                                                        <span md-highlight-text="searchText"> {{item.category_name}} </span>
                                                    </md-item-template>
                                                    <md-not-found>
                                                        No Category matching
                                                        "{{searchapcat}}" were
                                                        found.
                                                    </md-not-found>
                                                </md-autocomplete>
                                            </div>
                                            <div class="col-md-3">
                                                <label>Invoice SubCategory </label>
                                                <md-autocomplete
                                                        md-clear-button="true"
                                                        md-item-text="item.subcategory_name"
                                                        md-items="item in apsubcatsearch(searchsubcat)"
                                                        md-min-length=0
                                                        md-no-cache="true"
                                                        ng-disable="nodata_subcat"
                                                        md-search-text="searchsubcat"
                                                        md-selected-item="selectedsubcat"
                                                        md-selected-item-change="apsubcatchange(item)"
                                                        placeholder="Invoice SubCategory">
                                                    <md-item-template>
                                                        <span md-highlight-text="searchsubcat"> {{item.subcategory_name}} </span>
                                                    </md-item-template>
                                                    <md-not-found>
                                                        No SubCategory matching
                                                        "{{searchsubcat}}" were
                                                        found.
                                                    </md-not-found>
                                                </md-autocomplete>
                                            </div>
                                            <div class="col-md-3">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>Invoice GL </label>
                                                    <input maxlength="15"
                                                           disabled
                                                           ng-model="glno"
                                                           ng-blur=""
                                                           type="text"/>
                                                </md-input-container>
                                            </div>
                                        </div>
                                    </div>
                                </md-content>
                            </md-tab>
                        </md-tabs>
                    </md-content>
                </div>
            </div>
        </div>
        <!--        popup page End-->
    </div>
</div>

{% endverbatim %}
<script>
var app = angular.module('dateapp', ['ngMaterial', 'ui.bootstrap', 'AppCommon', 'ngMessages'])
    .config(function($httpProvider) {
        $httpProvider.defaults.xsrfCookieName = 'csrftoken';
        $httpProvider.defaults.xsrfHeaderName = 'X-CSRFToken';
    });
app.controller('datectrl', function($scope, newservice, $window, $mdDialog,$mdDateLocale,$element, $rootScope, $filter) {
    $scope.orderByField = '';
    $scope.maxSize = 3;
    $scope.itemsPerPage = 10;
    $scope.currentPage = 1;
    $scope.asset_data = [];
    $scope.asset = [];
    $scope.reasons = false;
    $scope.advanced_srch = false;
    $scope.count_data = false;
    $scope.no_count = false;
    $scope.cap_show = false;
    $scope.cat_show = false;
    $scope.write_show = false;
    $scope.impair_show = false;
    $scope.value_show = false;
    $scope.merge_data = false;
    $scope.split_data = false;
    $scope.transfer_data = false;
    $scope.sale_data = false;
    var detail = JSON.parse(sessionStorage.getItem('today'));
    var td = detail.date
    var employgid = detail.employee_gid;
    $scope.entity_gid = detail.entity_gid;
    $scope.cap_date = convertdate(td);
     $mdDateLocale.formatDate = function(date) {
            return $filter('date')(date, "dd-MMM-yyyy");
        };

    $scope.loading = function() {
        $mdDialog.show({
            templateUrl: 'loaderSpinner',
            parent: angular.element(document.body),
            clickOutsideToClose: false
        });
    };

    $scope.endloading = function() {
        $mdDialog.hide();
    };
    $scope.selectchange = function() {
        if($scope.selectedcat == undefined ){
           $scope.catagry = "";
            }
        else{
            $scope.catagry = $scope.selectedcat.assetcat_gid;
            }
    }

    $scope.loading_popup = function(ast_gidx) {
        $scope.asset_gid_pop = ast_gidx;
      load_ae_data(ast_gidx);
       modalshow('Modal_asset_ae');

    };
    $scope.expense_click = function(){

    var data = {
            "Params": {
              "FILTER": {
                      "Asset_Gid":$scope.asset_gid_pop
                      }
                      }
                      }
       var get_asset = newservice.asset_detail_expense(data)

        get_asset.then(function(result) {
        debugger;
            $scope.main_dataexpense = result.data.DATA;
            $scope.expense_data = $scope.main_dataexpense;
                   modalshow('Modal_expense');
            if(result.data.MESSAGE == "NOT_FOUND" ){
                $scope.warning = true;
            }
            if($scope.currentPage !=1){
                 var count = $scope.currentPage -1;
                 count = count * $scope.itemsPerPage;
            }
            else {
                count = 0;
            }
            for (i=0;i < $scope.asset.length;i++){
                var t = i+1;
                $scope.asset[i].index = count + t;
            };
            $scope.data_len = $scope.asset.length;
            $scope.pageLength = $scope.asset[0].Total_Row;
            $scope.Totalpages = Math.ceil($scope.pageLength / $scope.itemsPerPage);
            $scope.selectedcount = [];
        }).finally($scope.endloading);

    }


    $scope.selectdate = function() {
        $scope.assetdetails_capdate = $filter('date')(new Date($scope.assetdetails_cpdate),'yyyy-MM-dd');
    }
    $scope.tr_branch_frchange = function(selectedfr_br) {
        $scope.tr_branch_fr = selectedfr_br.branch_name;
    }
    $scope.tr_branch_tochange = function(selectedto_br) {
         $scope.tr_branch_to = selectedto_br.branch_name ;
    }
    $scope.cap_change_fr = function(e) {
        var d = new Date($scope.choices[e].cap_from_date);
        $scope.cap_from = d.getFullYear() + "-" + ("0" + (d.getMonth() + 1)).slice(-2) + "-" + ("0" + d.getDate()).slice(-2);
    }
    $scope.cap_change_to = function(e) {
        var d = new Date($scope.choices[e].cap_to_date);
        $scope.cap_to = d.getFullYear() + "-" + ("0" + (d.getMonth() + 1)).slice(-2) + "-" + ("0" + d.getDate()).slice(-2);
    }
    $scope.invs_date = function(e) {
        var d = new Date($scope.choices[e].inv_date);
        $scope.inv_date = d.getFullYear() + "-" + ("0" + (d.getMonth() + 1)).slice(-2) + "-" + ("0" + d.getDate()).slice(-2);
    }
    $scope.life_from = function(e) {
        var d = new Date($scope.choices[e].lifetime_frdate);
        $scope.lifetime_frdate = d.getFullYear() + "-" + ("0" + (d.getMonth() + 1)).slice(-2) + "-" + ("0" + d.getDate()).slice(-2);
    }
    $scope.life_to = function(e) {
        var d = new Date($scope.choices[e].lifetime_todate);
        $scope.lifetime_todate = d.getFullYear() + "-" + ("0" + (d.getMonth() + 1)).slice(-2) + "-" + ("0" + d.getDate()).slice(-2);
    }
    $scope.lease_from = function(e) {
        var d = new Date($scope.choices[e].asset_lease_frdate);
        $scope.asset_lease_frdate = d.getFullYear() + "-" + ("0" + (d.getMonth() + 1)).slice(-2) + "-" + ("0" + d.getDate()).slice(-2);
    }
    $scope.lease_to = function(e) {
        var d = new Date($scope.choices[e].asset_lease_todate);
        $scope.asset_lease_todate = d.getFullYear() + "-" + ("0" + (d.getMonth() + 1)).slice(-2) + "-" + ("0" + d.getDate()).slice(-2);
    }
    $scope.po_no_change = function(e) {
        $scope.po_no= $scope.choices[e].po_no;
    }
    $scope.mep_no_change = function(e) {
        $scope.mep_no= $scope.choices[e].mep_no;
    }
    $scope.invoice_no_change = function(e) {
        $scope.invoice_no= $scope.choices[e].invoice_no;
    }
    $scope.invoice_amt_change = function(e) {
        $scope.invoice_amt= $scope.choices[e].invoice_amt;
    }
    $scope.vendor_name_change = function(e) {
        $scope.vendor_name= $scope.choices[e].vendor_name;
    }
    $scope.dep_hold_change = function(e) {
        $scope.dep_hold= $scope.choices[e].dep_hold;
    }
    $scope.asset_value_fr_change = function(e) {
        $scope.asset_value_fr= $scope.choices[e].asset_value_fr;
    }
    $scope.asset_value_to_change = function(e) {
        $scope.asset_value_to= $scope.choices[e].asset_value_to;
    }
    $scope.search = function() {
        loaddata();

    }
    loaddata();
    function loaddata() {
        $scope.loading();
        search_count();
        var data = {
            "Params": {
              "FILTER": {
                      "Asset_Id":$scope.asset_id,
                      "Asset_Cat_Gid":$scope.catagry,
                      "CP_From_Date":$scope.cap_from,
                      "CP_TO_Date":$scope.cap_to,
                      "Branch_Gid":$scope.Choose_branch,
                      "Asset_Transfer_From":$scope.tr_branch_fr,
                      "Asset_Transfer_TO":$scope.tr_branch_to,
                      "PO_No":$scope.po_no,
                      "Asset_MEP_No":$scope.mep_no,
                      "Invoice_No":$scope.invoice_no,
                      "Invoice_Date":$scope.inv_date,
                      "Invoice_Amount":$scope.invoice_amt,
                      "Vendor_Name":$scope.vendor_name,
                      "LifeTime_EndDateFrom":$scope.lifetime_frdate,
                      "LifeTime_EndDateTO":$scope.lifetime_todate,
                      "Asset_Dep_Hold":$scope.dep_hold,
                      "Asset_Lease_StartDate":$scope.asset_lease_frdate,
                      "Asset_Lease_EndDate":$scope.asset_lease_todate,
                      "Asset_Value_From":$scope.asset_value_fr,
                      "Asset_Value_To":$scope.asset_value_to,
                      "Is_CP":$scope.count_capdate,
                      "Is_WriteOff":$scope.count_writeoff,
                      "Is_Impair":$scope.count_impair,
                      "Is_Value":$scope.count_value,
                      "Is_Merg":$scope.count_merge,
                      "Is_Split":$scope.count_split,
                      "Is_Transfer":$scope.count_transfer,
                      "Is_Category":$scope.count_cat,
                      "Is_Sale":$scope.count_sale,
                      "Page_Index":$scope.currentPage -1,
                      "Page_Size":$scope.itemsPerPage
                },
            }
        };

        var get_asset = newservice.asset_detail(data)

        get_asset.then(function(result) {
            $scope.main = result.data.DATA;
            $scope.asset = $scope.main;
            if(result.data.MESSAGE == "NOT_FOUND" ){
                $scope.warning = true;
            }
            if($scope.currentPage !=1){
                 var count = $scope.currentPage -1;
                 count = count * $scope.itemsPerPage;
            }
            else {
                count = 0;
            }
            for (i=0;i < $scope.asset.length;i++){
                var t = i+1;
                $scope.asset[i].index = count + t;
            };
            $scope.data_len = $scope.asset.length;
            $scope.pageLength = $scope.asset[0].Total_Row;
            $scope.Totalpages = Math.ceil($scope.pageLength / $scope.itemsPerPage);
            $scope.selectedcount = [];
        }).finally($scope.endloading);
    }

<!--    for AE-->
function load_ae_data(asset_gidx) {
    var data = {
            "Params": {
              "FILTER": {
                 "Asset_Gid":asset_gidx
                },
            }
        };

    var get_asset = newservice.asset_ae(data)
       $scope.assetae = [];
        var cr_tot = 0;
        var db_tot = 0;
        $scope.cr_tot = cr_tot;
        $scope.db_tot = db_tot;
        get_asset.then(function(result) {
            $scope.main = [];
            $scope.main = result.data.DATA;
            $scope.assetae = $scope.main;

            if(result.data.MESSAGE == "NOT_FOUND" ){
                modalhide('Modal_asset_ae');
                alert('No Records Found');
                $scope.warning = true;
            }



            for (i=0;i < $scope.assetae.length;i++){
               if ($scope.assetae[i].entry_type == 'C') {
                    cr_tot += $scope.assetae[i].entry_amt;
                }
               else if ($scope.assetae[i].entry_type == 'D') {
                   db_tot += $scope.assetae[i].entry_amt;
               }

            }

            $scope.cr_tot = cr_tot;
            $scope.db_tot = db_tot;

            for (i=0;i < $scope.assetae.length;i++){
                var t = i+1;
                $scope.assetae[i].index = count + t;
            };

        }).finally($scope.endloading);
    }

    loadcat();
    function loadcat(){
        var get_drop = newservice.drop_data()
        get_drop.then(function(result) {

            $scope.main = result.data.DATA;
            $scope.get_drop_data = $scope.main;

        });
        var get_brn = newservice.drop_brch();
           get_brn.then(function(result) {

            $scope.maintble = result.data.DATA;
            $scope.set_branch = $scope.maintble;
         });
    }
    var Choose_branch =1;
    loadlocation();
    function loadlocation(Choose_branch) {
        var loc = {
            "Params": {
                "FILTER": {
                    "Reftable_Gid": Choose_branch,
                },
            }
        }
        var get_drops = newservice.drop_locat(loc);
            get_drops.then(function(result) {

                $scope.maintble = result.data.DATA;
                $scope.get_drop_location = $scope.maintble;
            });
    }
    $scope.branch_change = function(branch_select) {
        $scope.Choose_branch = branch_select.branch_gid;
        loadlocation($scope.Choose_branch)
        }
     $scope.querySearchs = gotobranch;
        function gotobranch(query) {
            var result = $filter('filter')($scope.set_branch, {
                'branch_name': query
            });
            return result;
        }
    $scope.Datas = [{'title':"Cap date",'value' :"1" },
    {'title':"WriteOff",'value' :"2"} ,
    {'title':"Impairment",'value' :"3"} ,
    {'title':"Value Change",'value' :"4"},
    {'title':"Merge",'value' :"5"},
    {'title':"Split",'value' :"6"},
    {'title':"Transfer",'value' :"7"},
    {'title':"Category",'value' :"8"},
    {'title':"Sale",'value' :"9"}];
      $scope.searchTerm;
      $scope.clearSearchTerm = function() {
        $scope.searchTerm = '';
      };
      $element.find('input').on('keydown', function(ev) {
          ev.stopPropagation();
      });
    $scope.selectedcount = [];
    function search_count() {
        $scope.count_capdate = "N";
        $scope.count_writeoff = "N";
        $scope.count_impair = "N";
        $scope.count_value = "N";
        $scope.count_merge = "N";
        $scope.count_split = "N";
        $scope.count_transfer = "N";
        $scope.count_cat = "N";
        $scope.count_sale = "N";
        $scope.table_width = 1;
        if($scope.selectedcount != undefined){
            if($scope.selectedcount.length != 0) {
                for (i = 0; i < $scope.selectedcount.length; i++) {
                    var dta = $scope.selectedcount[i].value
                    if (dta == 1) {
                        $scope.count_capdate = "Y";
                        $scope.cap_show = true;
                        $scope.table_width = $scope.table_width + 1;
                    }
                    else if (dta == 2) {
                        $scope.count_writeoff = "Y";
                        $scope.write_show = true;
                        $scope.table_width = $scope.table_width + 2;
                    }
                    else if (dta == 3) {
                        $scope.count_impair = "Y"
                        $scope.impair_show = true;
                        $scope.table_width = $scope.table_width + 2;
                    }
                    else if (dta == 4) {
                        $scope.count_value = "Y"
                        $scope.value_show = true;
                        $scope.table_width = $scope.table_width + 2;
                    }
                    else if (dta == 5) {
                        $scope.count_merge = "Y"
                        $scope.merge_data = true;
                        $scope.table_width = $scope.table_width + 2;
                    }
                    else if (dta == 6) {
                        $scope.count_split = "Y"
                        $scope.split_data = true;
                        $scope.table_width = $scope.table_width + 2;
                    }
                    else if (dta == 7) {
                        $scope.count_transfer = "Y"
                        $scope.transfer_data = true;
                        $scope.table_width = $scope.table_width + 2;
                    }
                    else if (dta == 8) {
                        $scope.count_cat = "Y"
                        $scope.cat_show = true;
                        $scope.table_width = $scope.table_width + 1;
                    }
                    else if (dta == 9) {
                        $scope.count_sale = "Y"
                        $scope.sale_data = true;
                        $scope.table_width = $scope.table_width + 2;
                    }
                }
                $scope.count_data = true;
                $scope.no_count = false;
            }
            else{
                $scope.count_data = false;
                $scope.no_count = true;
            }
        }
        else if ($scope.selectedcount == undefined || $scope.selectedcount.length == 0 ){
            $scope.count_data = false;
            $scope.no_count = true;
        }
        $scope.table_width = $scope.table_width - 2
    }

    $scope.search_opt =[{'title':"CP Date",'model':"cp_date"},
    {'title':"Transfer Branch",'model':"transfer_branch"},
    {'title':"Asset EndDate",'model':"asset_enddate"},
    {'title':"Invoice Date",'model':"ins_date"},
    {'title':"Asset Lease Date",'model':"asset_leasedate"},
    {'title':"Asset Value",'model':"asset_value"},
    {'title':"PO No",'model':"po_no_enter"},
    {'title':"MEP No",'model':"mep_no_enter"},
    {'title':"Invoice No",'model':"invoice_no_enter"},
    {'title':"Invoice Amount",'model':"invoice_amt_enter"},
    {'title':"Vendor Name",'model':"vendor_name_enter"},
    {'title':"Depreciation Hold",'model':"dep_hold_enter"}];
    $scope.option_change = function(selectedopt,e){
    var opt_data = selectedopt.model;
        if(opt_data == "cp_date"){
            $scope.choices[e].cap_date = true;
        }
        else if(opt_data == "transfer_branch"){
            $scope.choices[e].transfer_branch = true;
        }
        else if(opt_data == "asset_enddate"){
           $scope.choices[e].asset_enddate = true;
        }
        else if(opt_data == "ins_date"){
            $scope.choices[e].ins_date = true;
        }
        else if(opt_data == "asset_leasedate"){
            $scope.choices[e].asset_leasedate = true;
        }
        else if(opt_data == "po_no_enter"){
            $scope.choices[e].po_no_enter = true;
        }
        else if(opt_data == "mep_no_enter"){
            $scope.choices[e].mep_no_enter = true;
        }
        else if(opt_data == "invoice_no_enter"){
            $scope.choices[e].invoice_no_enter = true;
        }
        else if(opt_data == "invoice_amt_enter"){
            $scope.choices[e].invoice_amt_enter = true;
        }
        else if(opt_data == "vendor_name_enter"){
            $scope.choices[e].vendor_name_enter = true;
        }
        else if(opt_data == "dep_hold_enter"){
            $scope.choices[e].dep_hold_enter = true;
        }
        else if(opt_data == "asset_value"){
            $scope.choices[e].asset_value = true;
        }
    }
    $scope.querySearchopt = gotoopt;
        function gotoopt(query) {
            var result = $filter('filter')($scope.search_opt, {
                'title': query
            });
            return result;
        }
     $scope.querySearch = gotoexe;
        function gotoexe(query) {
            var result = $filter('filter')($scope.get_drop_location, {
                'assetlocation_reftablegid': query
            });
            return result;
        }
    $scope.catsearch = gotocat;
        function gotocat(query) {
            var result = $filter('filter')($scope.get_drop_data, {
                'assetcat_subcatname': query
            });
            return result;
        }
    $scope.viewdet = function(e) {
        var view = e.lj_default_details[0];
        $scope.assetdetails_id = e.assetdetails_id;
        $scope.assetdetails_value = e.assetdetails_value;
        $scope.assetdetails_capdate = e.assetdetails_capdate;
        $scope.assetsale_reason = e.assetsale_reason
        $scope.assetdetails_status = e.assetdetails_status;
        $scope.asset_ctgry = view.asset_cat_name;
        $scope.product_name = view.product_name;
        $scope.asset_location = view.location_name;
        $scope.asset_branch = view.branch_name;
        modalshow('viewmodal');
        $scope.asset_data = [{
            "asset_id": $scope.assetdetails_id,
            "asset_value": $scope.assetdetails_value,
            "cap_date": $scope.assetdetails_capdate,
            "catogry": $scope.asset_ctgry,
            "branch": $scope.asset_branch,
            "status": $scope.assetdetails_status,
            "product_name": $scope.product_name,
            "location": $scope.asset_location,
            "reason": $scope.assetsale_reason,
        }];
    }
    $scope.imgshow = function(id){
    if($scope.asset[id].assetdetails_imagepath != null){
         modalshow('imagemodal');
         $scope.asset_img =$scope.asset[id].assetdetails_imagepath;
     }
    }

    $scope.myfun = function() {
        $scope.asset = $filter('filter')($scope.main, {
            "assetdetails_id": $scope.asset_id,
            "assetdetails_value": $scope.asset_value,
            "assetdetails_capdate": $scope.cap_date,
            "assetdetails_gid": $scope.asset_code,
            "assetdetails_branchgid": $scope.asset_branch,
        });

    };
    $scope.reason = function(id){
            $scope.assetsale_reason = $scope.asset[id].assetsale_reason ;
            $scope.reasons = true;
    }
    $scope.advance_search = function(   ){
        if($scope.advanced_srch != true){
            $scope.advanced_srch = true;
            $scope.choices = [{show_option:true}];
            for (i = 0; i < $scope.choices.length; i++) {
                $scope.choices[i].cap_date = false;
                $scope.choices[i].transfer_branch = false;
                $scope.choices[i].asset_enddate = false;
                $scope.choices[i].ins_date = false;
                $scope.choices[i].asset_leasedate = false;
                $scope.choices[i].po_no_enter = false;
                $scope.choices[i].invoice_no_enter = false;
                $scope.choices[i].invoice_amt_enter = false;
                $scope.choices[i].vendor_name_enter = false;
                $scope.choices[i].dep_hold_enter = false;
                $scope.choices[i].asset_value = false;
            }
        }
        else{
            $scope.advanced_srch = false;
        }
    }
     $scope.addNewChoice = function() {
        $scope.choices.push({show_option:true});
     };

    $scope.removeChoice = function() {
        var lastItem = $scope.choices.length-1;
        $scope.choices.splice(lastItem);
        $scope.add_asset = false;
    };
});

app.service('newservice', function($http) {
    this.asset_detail = function(data) {
        var response = $http.post(Appname + "/asset_details/", {
            params: {
                "Sub_Type": "SUMMARY",
                "Type": "FA_QUERY",
                "Group": "FA_QUERY_SUMMARY",
                "json": data,
            }
        });
        return response;
    }

    this.asset_ae = function(data) {
      var response = $http.post(Appname + "/asset_details/",{
         params: {
            "Group":"FA_QUERY_SUMMARY",
            "Type":"FA_QUERY",
            "Sub_Type":"AE",
            "json":data,
         }
      }
      );
      return response;
    }

    this.drop_data = function() {
        var response = $http.post(Appname + "/drop_data/", {});
        return response;
     }
    this.drop_brch = function() {
        var response = $http.post(Appname + "/get_branch/", {});
        return response;
    }
        this.asset_detail_expense = function(data) {
        var response = $http.post(Appname + "/asset_details/", {
            params: {
                "Sub_Type": "EXPENSE_AE",
                "Type": "FA_QUERY",
                "Group": "FA_QUERY_SUMMARY",
                "json": data,
            }
        });
        return response;
    }
    this.drop_locat = function(branch, employgid) {
        var respons = $http.post(Appname + "/branch_details/", {
            params: {
                "Group": "FA_LOCATION_GET",
                "Type": "FA_LOCATION",
                "Sub_Type": "DDL",
                "json": branch,
            }
        });
        return respons;
    }
});

</script>
{% endblock %}