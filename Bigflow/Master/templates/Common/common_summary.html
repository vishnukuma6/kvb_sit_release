{% extends 'Shared/mainLayout.html' %}
{% load static from staticfiles %}
{% block title %} Summary {% endblock %}
{% block content %}
{% csrf_token %}
{% verbatim %}
<div class="maincontent">
    <div ng-app="commonsummary" ng-controller="Ctrlcommon" class="container container1">
        <div class="row">
            <div class="row-header col-lg-12 col-sm-12">
                <h4>Common Summary</h4>
            </div>
            <md-button class="md-raised custbutton" value="Close" class="btn btn-secondary"
                       ng-click="empget(add);">
                Employee
            </md-button>

            <md-button class="md-raised custbutton" value="Close" class="btn btn-secondary"
                       ng-click="branchget(add);">
                Branch
            </md-button>

            <md-button class="md-raised custbutton" value="Close" class="btn btn-secondary"
                       ng-click="glget(add);">
                Gl
            </md-button>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="col-md-4">
                    <md-select ng-model="summarytype" placeholder="Select Summary Page" class="md-underline">
                        <md-option value="uom">Uom Summary</md-option>
                        <md-option value="bank">Bank Summary</md-option>
                        <md-option value="paymode">Paymode Summary</md-option>
                        <md-option value="designation">Designation Summary</md-option>
                        <md-option value="dept">Dept Summary</md-option>
                        <md-option value="custcategory">Category Summary</md-option>
                        <md-option value="contacttype">Contact Summary</md-option>
                    </md-select>
                </div>

                <div class="col-md-4" style="margin-top:20px;margin-left:0px;">

                    <md-button class="md-fab md-mini md-primary custbutton" ng-click="add()" style="margin-left:90px;">
                        <md-icon>search</md-icon>
                        <md-tooltip>Search Details</md-tooltip>
                    </md-button>
                </div>
                <div class="col-md-4" style="margin-top:20px;margin-left:-160px;">

                    <td class="text-center">
                        <md-button ng-click=""
                                   data-toggle="modal" data-target="#myModal"
                                   class="md-fab md-mini md-primary custbutton" ng-hide="isDisabled">
                            <md-icon>add</md-icon>
                            <md-tooltip></md-tooltip>
                        </md-button>
                    </td>
                </div>
            </div>
        </div>


        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false"
             style="height:auto;width:auto"
             aria-labelledby="exampleModalLabel" aria-hidden="true">
            <form name="User" novalidate>
                <div class="modal-dialog modal-style" role="document">
                    <div class="modal-content">

                        <div class="modal-body" style="height:200px;">

                            <div class="row" style="">
                                <div class="row-header col-lg-12 col-sm-12" style="">
                                    <h4>Add Details</h4>
                                </div>
                            </div>
                            <div class="row" style="margin-top:30px;margin-left:30px;">
                                <div class="col-md-12" ng-show="bank">
                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter Bank Code</label>
                                            <input type="text" ng-model="invnum" maxlength="8" autocomplete="off"
                                                   ng-required="true">
                                        </md-input-container>
                                    </div>

                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter Bank Name</label>
                                            <input type="text" ng-model="invnums" maxlength="103" autocomplete="off"
                                                   ng-required="true">
                                        </md-input-container>
                                    </div>

                                </div>
                                <div class="col-md-12" ng-show="paymode">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="col-md-5">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>Enter Paymode Code</label>
                                                    <input type="text" ng-model="invnum" maxlength="8"
                                                           autocomplete="off"
                                                           required>
                                                </md-input-container>
                                            </div>

                                            <div class="col-md-5">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>Enter Paymode Name</label>
                                                    <input type="text" ng-model="invnums" maxlength="13"
                                                           autocomplete="off"
                                                           required>
                                                </md-input-container>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <div class="col-md-12" ng-show="uom">
                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter Uom Code</label>
                                            <input type="text" ng-model="invnum" maxlength="8" autocomplete="off"
                                                   required>
                                        </md-input-container>
                                    </div>

                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter Uom Name</label>
                                            <input type="text" ng-model="invnums" maxlength="13" autocomplete="off"
                                                   required>
                                        </md-input-container>
                                    </div>
                                </div>
                                <div class="col-md-12" ng-show="designation">
                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter Designation Code</label>
                                            <input type="text" ng-model="invnum" maxlength="8" autocomplete="off"
                                                   required>
                                        </md-input-container>
                                    </div>

                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter Designation Name</label>
                                            <input type="text" ng-model="invnums" maxlength="13" autocomplete="off"
                                                   required>
                                        </md-input-container>
                                    </div>
                                </div>
                                <div class="col-md-12" ng-show="dept">
                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter Dept Code</label>
                                            <input type="text" ng-model="invnum" maxlength="8" autocomplete="off"
                                                   required>
                                        </md-input-container>
                                    </div>

                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter Dept Name</label>
                                            <input type="text" ng-model="invnums" maxlength="13" autocomplete="off"
                                                   required>
                                        </md-input-container>
                                    </div>
                                </div>
                                <div class="col-md-12" ng-show="custcategory">
                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter CustCategory Code</label>
                                            <input type="text" ng-model="invnum" maxlength="8" autocomplete="off"
                                                   required>
                                        </md-input-container>
                                    </div>

                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter CustCategory Name</label>
                                            <input type="text" ng-model="invnums" maxlength="13" autocomplete="off"
                                                   required>
                                        </md-input-container>
                                    </div>
                                </div>
                                <div class="col-md-12" ng-show="contacttype">
                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter ContactType Code</label>
                                            <input type="text" ng-model="invnum" maxlength="8" autocomplete="off"
                                                   required>
                                        </md-input-container>
                                    </div>

                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter ContactType Name</label>
                                            <input type="text" ng-model="invnums" maxlength="13" autocomplete="off"
                                                   required>
                                        </md-input-container>
                                    </div>
                                </div>
                            </div>


                        </div>
                        <div class="modal-footer text-right">
                            <md-button class="md-raised" value="Close" data-dismiss="modal" ng-click="closedetail()">
                                Close
                            </md-button>
                            <md-button class="md-raised custbutton"
                                       ng-click="savedetail()"
                                       value="Submit"
                                       data-dismiss="modal"
                            >Submit
                            </md-button>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <!--        edit-->

        <div class="modal fade" id="myModa" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false"
             style="height:auto;width:auto"
             aria-labelledby="exampleModalLabel" aria-hidden="true">
            <form name="User" novalidate>
                <div class="modal-dialog modal-style" role="document" style="width:80%">
                    <div class="modal-content">

                        <div class="modal-body" style="height:100%;">

                            <div class="row" style="">
                                <div class="row-header col-lg-12 col-sm-12" style="">
                                    <h4>Update Details</h4>
                                </div>
                            </div>
                            <br/>
                            <div class="row">
                                <div class="col-md-12" ng-show="bank">
                                    <div class="row">
                                        <div class="col-md-5">
                                            <md-input-container class="md-block inputcontainer">
                                                <label>Enter Bank Code</label>
                                                <input type="text" ng-model="invnu" maxlength="8" autocomplete="off"
                                                       ng-required="true">
                                            </md-input-container>
                                        </div>
                                        <div class="col-md-5">
                                            <md-input-container class="md-block inputcontainer">
                                                <label>Enter Bank Name</label>
                                                <input type="text" ng-model="invn" maxlength="103" autocomplete="off"
                                                       ng-required="true">
                                            </md-input-container>
                                        </div>
                                        <div class="col-md-1">
                                            <md-button class="md-icon-button md-primary"
                                                       ng-click="create_branch()">
                                                <md-icon>add</md-icon>
                                                <md-tooltip>Create New Branch</md-tooltip>
                                            </md-button>
                                        </div>
                                    </div>
                                    <div class="row table-responsive">
                                        <div class="col-md-12 col-lg-12 col-sm-12">
                                            <table class="table table-striped table-bordered table-condensed table-hover md-primary"
                                                   md-progress="deferred">
                                                <thead class="header" style="background-color:#4E8888;">
                                                <tr>
                                                    <th>S.No</th>
                                                    <th>Branch Code</th>
                                                    <th>Branch Name</th>
                                                    <th>Branch IFSC Code</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr align="center"
                                                    ng-repeat="branch in bank_branch_details.slice(((currentPages-1)*itemsPerPages),((currentPages)*itemsPerPages)) | filter:search:strict">
                                                    <td>
                                                        <center>
                                                            {{((currentPages-1)*itemsPerPages)+$index+1}}
                                                        </center>
                                                    </td>
                                                    <td>{{branch.bankbranch_code}}</td>
                                                    <td>{{branch.bankbranch_name}}</td>
                                                    <td>{{branch.bankbranch_ifsccode}}</td>
                                                </tr>
                                                <tr ng-show="bank_branch_details.length == 0">
                                                    <td class="warning" colspan="12">
                                                        No Records Found.
                                                    </td>
                                                </tr>
                                                </tbody>
                                                <tfoot>
                                                <tr align="center">
                                                    <td colspan="2">
                                                        <ul uib-pagination
                                                            total-items="bank_branch_details.length"
                                                            ng-model="currentPages"
                                                            max-size="maxSizes"
                                                            class="pagination-sm"
                                                            boundary-links="true"
                                                            items-per-page="itemsPerPages"></ul>
                                                    </td>
                                                    <td colspan="2">
                                                        Total:{{bank_branch_details.length}}
                                                    </td>
                                                </tr>
                                                </tfoot>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12" ng-show="paymode">
                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="col-md-5">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>Enter Paymode Code</label>
                                                    <input type="text" ng-model="invnu" maxlength="8" autocomplete="off"
                                                           required>
                                                </md-input-container>
                                            </div>


                                            <div class="col-md-5">
                                                <md-input-container class="md-block inputcontainer">
                                                    <label>Enter Paymode Name</label>
                                                    <input type="text" ng-model="invn" maxlength="13" autocomplete="off"
                                                           required>
                                                </md-input-container>
                                            </div>

                                            <div class="col-md-1">
                                                <md-button class="md-icon-button md-primary"
                                                           ng-click="create_paymode_details()">
                                                    <md-icon>add</md-icon>
                                                    <md-tooltip>Create Paymode Details</md-tooltip>
                                                </md-button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row table-responsive">
                                        <div class="col-md-12 col-lg-12 col-sm-12">
                                            <table class="table table-striped table-bordered table-condensed table-hover md-primary"
                                                   md-progress="deferred">
                                                <thead class="header" style="background-color:#4E8888;">
                                                <tr>
                                                    <th>S.No</th>
                                                    <th>Paymode Name</th>
                                                    <th>Paymode GL Number</th>
                                                    <th>Action</th>
                                                </tr>
                                                </thead>
                                                <tbody>
                                                <tr align="center"
                                                    ng-repeat="pay in paymod_details_data.slice(((currentPages-1)*itemsPerPages),((currentPages)*itemsPerPages)) | filter:search:strict">
                                                    <td>
                                                        <center>
                                                            {{((currentPages-1)*itemsPerPages)+$index+1}}
                                                        </center>
                                                    </td>
                                                    <td>{{pay.paymodedetails_name}}</td>
                                                    <td>{{pay.paymodedetails_glno}}</td>
                                                    <td class="text-center">
                                                        <i class="material-icons"
                                                           ng-class="pay.paymodedetails_isactive=='Y'? 'editlink':''"
                                                           ng-click="activeDeactive_click(pay.paymodedetails_isactive,pay.paymodedetails_gid)"
                                                           title="{{pay.paymodedetails_isactive=='Y' ? 'Click to Inactive':'Click to active'}}">wb_sunny</i>

                                                    </td>
                                                </tr>
                                                <tr ng-show="paymod_details_data.length == 0">
                                                    <td class="warning" colspan="12">
                                                        No Records Found.
                                                    </td>
                                                </tr>
                                                </tbody>
                                                <tfoot>
                                                <tr align="center">
                                                    <td colspan="2">
                                                        <ul uib-pagination
                                                            total-items="paymod_details_data.length"
                                                            ng-model="currentPages"
                                                            max-size="maxSizes"
                                                            class="pagination-sm"
                                                            boundary-links="true"
                                                            items-per-page="itemsPerPages"></ul>
                                                    </td>
                                                    <td colspan="2">
                                                        Total:{{paymod_details_data.length}}
                                                    </td>
                                                </tr>
                                                </tfoot>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-12" ng-show="uom">
                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter Uom Code</label>
                                            <input type="text" ng-model="invnu" maxlength="8" autocomplete="off"
                                                   required>
                                        </md-input-container>
                                    </div>

                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter Uom Name</label>
                                            <input type="text" ng-model="invn" maxlength="13" autocomplete="off"
                                                   required>
                                        </md-input-container>
                                    </div>
                                </div>
                                <div class="col-md-12" ng-show="designation">
                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter Designation Code</label>
                                            <input type="text" ng-model="invnu" maxlength="8" autocomplete="off"
                                                   required>
                                        </md-input-container>
                                    </div>

                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter Designation Name</label>
                                            <input type="text" ng-model="invn" maxlength="13" autocomplete="off"
                                                   required>
                                        </md-input-container>
                                    </div>
                                </div>
                                <div class="col-md-12" ng-show="dept">
                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter Dept Code</label>
                                            <input type="text" ng-model="invnu" maxlength="8" autocomplete="off"
                                                   required>
                                        </md-input-container>
                                    </div>

                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter Dept Name</label>
                                            <input type="text" ng-model="invn" maxlength="13" autocomplete="off"
                                                   required>
                                        </md-input-container>
                                    </div>
                                </div>
                                <div class="col-md-12" ng-show="custcategory">
                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter CustCategory Code</label>
                                            <input type="text" ng-model="invnu" maxlength="8" autocomplete="off"
                                                   required>
                                        </md-input-container>
                                    </div>

                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter CustCategory Name</label>
                                            <input type="text" ng-model="invn" maxlength="13" autocomplete="off"
                                                   required>
                                        </md-input-container>
                                    </div>
                                </div>
                                <div class="col-md-12" ng-show="contacttype">
                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter ContactType Code</label>
                                            <input type="text" ng-model="invnu" maxlength="8" autocomplete="off"
                                                   required>
                                        </md-input-container>
                                    </div>

                                    <div class="col-md-5">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Enter ContactType Name</label>
                                            <input type="text" ng-model="invn" maxlength="13" autocomplete="off"
                                                   required>
                                        </md-input-container>
                                    </div>
                                </div>
                            </div>


                        </div>
                        <div class="modal-footer text-right">
                            <md-button class="md-raised" value="Close" data-dismiss="modal" ng-click="closedetail()">
                                Close
                            </md-button>
                            <md-button class="md-raised custbutton"
                                       ng-click="editdetail()"
                                       value="Submit"
                                       data-dismiss="modal"

                            >Submit
                            </md-button>
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <!--        edit-->


        <div class="row table-responsive">
            <div class="col-md-12 col-lg-12 col-sm-12">
                <table class="table table-striped table-bordered table-condensed table-hover md-primary"
                       style="width:100%">
                    <thead class="header">
                    <tr>
                        <th>S.No</th>
                        <th>Code</th>
                        <th>Name</th>

                        <th>Edit</th>


                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                    <tr ng-show="bank"
                        ng-repeat="emp in alldetails.slice(((currentPage-1)*itemsPerPage), ((currentPage)*itemsPerPage))  | filter:search:strict ">
                        <td>
                            <center>{{((currentPage-1)*itemsPerPage)+$index+1}}</center>
                        </td>

                        <td class="text-center">{{emp.bank_code }}</td>
                        <td class="text-center">{{emp.bank_name}}</td>

                        <td class="text-center">
                                <span title="Edit" ng-click="getroles(emp)"
                                      data-toggle="modal" data-target="#myModa" class="editlink">
                                    <i class="material-icons">edit</i>
                                </span>
                        </td>


                    </tr>
                    <tr ng-show="paymode"
                        ng-repeat="emp in others.slice(((currentPage-1)*itemsPerPage), ((currentPage)*itemsPerPage))  | filter:search:strict ">
                        <td>
                            <center>{{((currentPage-1)*itemsPerPage)+$index+1}}</center>
                        </td>
                        <td class="text-center">{{emp.paymode_code}}</td>
                        <td class="text-center">{{emp.Paymode_name}}</td>
                        <td class="text-center">
                                <span title="Edit" ng-click="paymodeclick(emp)"
                                      data-toggle="modal" data-target="#myModa" class="editlink">
                                    <i class="material-icons">edit</i>
                                </span>
                        </td>

                    </tr>
                    </tr>
                    <tr ng-show="uom"
                        ng-repeat="emp in uom.slice(((currentPage-1)*itemsPerPage), ((currentPage)*itemsPerPage))  | filter:search:strict ">
                        <td>
                            <center>{{((currentPage-1)*itemsPerPage)+$index+1}}</center>
                        </td>
                        <td class="text-center">{{emp.uom_code}}</td>
                        <td class="text-center">{{emp.uom_name}}</td>
                        <td class="text-center">
                                <span title="Edit" ng-click="uomclick(emp)"
                                      data-toggle="modal" data-target="#myModa" class="editlink">
                                    <i class="material-icons">edit</i>
                                </span>
                        </td>

                    </tr>
                    </tr>
                    <tr ng-show="designation"
                        ng-repeat="emp in designation.slice(((currentPage-1)*itemsPerPage), ((currentPage)*itemsPerPage))  | filter:search:strict ">
                        <td>
                            <center>{{((currentPage-1)*itemsPerPage)+$index+1}}</center>
                        </td>
                        <td class="text-center">{{emp.designation_code}}</td>
                        <td class="text-center">{{emp.designation_name}}</td>
                        <td class="text-center">
                                <span title="Edit" ng-click="desclick(emp)"
                                      data-toggle="modal" data-target="#myModa" class="editlink">
                                    <i class="material-icons">edit</i>
                                </span>
                        </td>

                    </tr>
                    </tr>
                    <tr ng-show="dept"
                        ng-repeat="emp in dept.slice(((currentPage-1)*itemsPerPage), ((currentPage)*itemsPerPage))  | filter:search:strict ">
                        <td>
                            <center>{{((currentPage-1)*itemsPerPage)+$index+1}}</center>
                        </td>
                        <td class="text-center">{{emp.dept_code}}</td>
                        <td class="text-center">{{emp.dept_name}}</td>
                        <td class="text-center">
                                <span title="Edit" ng-click="deptclick(emp)"
                                      data-toggle="modal" data-target="#myModa" class="editlink">
                                    <i class="material-icons">edit</i>
                                </span>
                        </td>

                    </tr>
                    </tr>
                    <tr ng-show="custcategory"
                        ng-repeat="emp in custcategory.slice(((currentPage-1)*itemsPerPage), ((currentPage)*itemsPerPage))  | filter:search:strict ">
                        <td>
                            <center>{{((currentPage-1)*itemsPerPage)+$index+1}}</center>
                        </td>
                        <td class="text-center">{{emp.custcategory_code}}</td>
                        <td class="text-center">{{emp.custcategory_name}}</td>
                        <td class="text-center">
                                <span title="Edit" ng-click="custclick(emp)"
                                      data-toggle="modal" data-target="#myModa" class="editlink">
                                    <i class="material-icons">edit</i>
                                </span>
                        </td>

                    </tr>
                    </tr>
                    <tr ng-show="contacttype"
                        ng-repeat="emp in contacttype.slice(((currentPage-1)*itemsPerPage), ((currentPage)*itemsPerPage))  | filter:search:strict ">
                        <td>
                            <center>{{((currentPage-1)*itemsPerPage)+$index+1}}</center>
                        </td>
                        <td class="text-center">{{emp.contacttype_code}}</td>
                        <td class="text-center">{{emp.contacttype_Name}}</td>
                        <td class="text-center">
                                <span title="Edit" ng-click="conclick(emp)"
                                      data-toggle="modal" data-target="#myModa" class="editlink">
                                    <i class="material-icons">edit</i>
                                </span>
                        </td>

                    </tr>
                    </tr>
                    </tbody>
                    <tfoot>
                    <tr>
                        <td colspan="2" ng-show="custcategory">
                            <ul uib-pagination total-items="custcategory.length" ng-model="currentPage"
                                max-size="maxSize"
                                class="pagination-sm" boundary-links="true" items-per-page="itemsPerPage"></ul>
                        </td>
                        <td colspan="4" style="padding: 20px;" ng-show="custcategory">
                            <strong>Total Count:{{custcategory.length}}</strong>

                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" ng-show="bank">
                            <ul uib-pagination total-items="alldetails.length" ng-model="currentPage"
                                max-size="maxSize"
                                class="pagination-sm" boundary-links="true" items-per-page="itemsPerPage"></ul>
                        </td>
                        <td colspan="4" style="padding: 20px;" ng-show="bank">
                            <strong>Total Count:{{alldetails.length}}</strong>

                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" ng-show="paymode">
                            <ul uib-pagination total-items="others.length" ng-model="currentPage"
                                max-size="maxSize"
                                class="pagination-sm" boundary-links="true" items-per-page="itemsPerPage"></ul>
                        </td>
                        <td colspan="4" style="padding: 20px;" ng-show="paymode">
                            <strong>Total Count:{{others.length}}</strong>

                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" ng-show="uom">
                            <ul uib-pagination total-items="uom.length" ng-model="currentPage"
                                max-size="maxSize"
                                class="pagination-sm" boundary-links="true" items-per-page="itemsPerPage"></ul>
                        </td>
                        <td colspan="4" style="padding: 20px;" ng-show="uom">
                            <strong>Total Count:{{uom.length}}</strong>

                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" ng-show="designation">
                            <ul uib-pagination total-items="designation.length" ng-model="currentPage"
                                max-size="maxSize"
                                class="pagination-sm" boundary-links="true" items-per-page="itemsPerPage"></ul>
                        </td>
                        <td colspan="4" style="padding: 20px;" ng-show="designation">
                            <strong>Total Count:{{designation.length}}</strong>

                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" ng-show="dept">
                            <ul uib-pagination total-items="dept.length" ng-model="currentPage"
                                max-size="maxSize"
                                class="pagination-sm" boundary-links="true" items-per-page="itemsPerPage"></ul>
                        </td>
                        <td colspan="4" style="padding: 20px;" ng-show="dept">
                            <strong>Total Count:{{dept.length}}</strong>

                        </td>
                    </tr>
                    <tr>
                        <td colspan="2" ng-show="contacttype">
                            <ul uib-pagination total-items="contacttype.length" ng-model="currentPage"
                                max-size="maxSize"
                                class="pagination-sm" boundary-links="true" items-per-page="itemsPerPage"></ul>
                        </td>
                        <td colspan="4" style="padding: 20px;" ng-show="contacttype">
                            <strong>Total Count:{{contacttype.length}}</strong>

                        </td>
                    </tr>
                    </tfoot>
                </table>
            </div>
        </div>

        <div class="modal fade" id="create_branch_view" tabindex="-1" role="dialog" data-backdrop="static"
             data-keyboard="false"
             aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document" style="width:90%">
                <div class="modal-content">
                    <div class="modal-header popup-header">
                        <h5 class="modal-title" id="exampleModalLabels2">
                            ADDING NEW BRANCH:{{invn}}
                            <button type="button" class="close" data-dismiss="modal"
                                    ng-click="close_pr_popup()"
                                    aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </h5>
                    </div>
                    <div class="body">
                        <br/>
                        <form name="bank_details">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>IFSC Code</label>
                                            <input type="text" ng-model="bankbranch_ifsccode" autocomplete="off"
                                                   ng-blur="checkifsc_fn(bankbranch_ifsccode)"
                                                   required>
                                        </md-input-container>
                                    </div>
                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Bank Name</label>
                                            <input type="text" ng-model="bank_name" autocomplete="off" readonly
                                                    required>
                                        </md-input-container>
                                    </div>
                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Branch Name</label>
                                            <input type="text" ng-model="bankbranch_name" autocomplete="off" readonly
                                                   required>
                                        </md-input-container>
                                    </div>
                                    <!--                                    <div class="col-md-4">-->
                                    <!--                                        <md-input-container class="md-block inputcontainer">-->
                                    <!--                                            <label>Bank Branch name</label>-->
                                    <!--                                            <input ng-model="bankbranch_name" ng-required="true"-->
                                    <!--                                                   maxlength="16"/>-->
                                    <!--                                        </md-input-container>-->
                                    <!--                                    </div>-->
                                    <!--                                    <div class="col-md-4">-->
                                    <!--                                        <md-input-container class="md-block inputcontainer">-->
                                    <!--                                            <label>Bank Branch IFSC Code</label>-->
                                    <!--                                            <input ng-model="bankbranch_ifsccode" ng-required="true"-->
                                    <!--                                                   maxlength="16"/>-->
                                    <!--                                        </md-input-container>-->
                                    <!--                                    </div>-->
                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Bank Branch Micro Code</label>
                                            <input ng-model="bankbranch_microcode"
                                                   maxlength="16"/>
                                        </md-input-container>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div ng-include="'empadrs'" ng-required="true"></div>
                                </div>
                            </div>
                            <br/>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="col-md-6 text-right">
                                        <md-button class="md-raised custbutton" value="submit"
                                                   ng-click="save_bank_branch()"
                                                   ng-disabled="bank_details.$invalid">
                                            Save
                                        </md-button>
                                    </div>
                                    <div class="col-md-2">
                                        <md-button class="md-raised md-warn" value="close" data-dismiss="modal"
                                                   aria-label="Close">Cancel
                                        </md-button>
                                    </div>
                                </div>

                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="paymode_view" tabindex="-1" role="dialog" data-backdrop="static"
             data-keyboard="false"
             aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document" style="width:90%">
                <div class="modal-content">
                    <div class="modal-header popup-header">
                        <h5 class="modal-title" id="exampleModalLabels_paymode">
                            Adding Paymode Details:{{invn}}
                            <button type="button" class="close" data-dismiss="modal"
                                    ng-click="close_pr_popup()"
                                    aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </h5>
                    </div>
                    <div class="body">
                        <br/>
                        <form name="paymode_details">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="col-md-3">
                                        <label>Choose Category</label>
                                        <md-autocomplete
                                                md-no-cache="true"
                                                md-selected-item="subtaxdtls.category_name"
                                                md-search-text="search_category"
                                                md-selected-item-change="CategoryChanged(item.category_gid)"
                                                md-items="item in getCategoryName(search_category)"
                                                md-item-text="item.category_name"
                                                md-min-length=0
                                                ng-required="true"
                                                placeholder="Category">
                                            <md-item-template>
                                                <span md-highlight-text="searchText"> {{item.category_name}} </span>
                                            </md-item-template>
                                            <md-not-found>
                                                No Category Name matching "{{search_category}}" were found.
                                            </md-not-found>
                                        </md-autocomplete>
                                    </div>
                                    <div class="col-md-3">
                                        <label>Choose Sub Category</label>
                                        <md-autocomplete
                                                md-no-cache="true"
                                                md-selected-item="sub.subcategory_name"
                                                md-search-text="search_sub_category"
                                                md-selected-item-change="SubCategoryChanged(sub.subcategory_gid,sub.subcategory_glno)"
                                                md-items="sub in getSubCategoryName(search_sub_category)"
                                                md-item-text="sub.subcategory_name"
                                                md-min-length=0
                                                ng-required="true"
                                                placeholder="Sub Category">
                                            <md-item-template>
                                                <span md-highlight-text="searchText"> {{sub.subcategory_name}} </span>
                                            </md-item-template>
                                            <md-not-found>
                                                No Sub Category Name matching "{{search_sub_category}}" were found.
                                            </md-not-found>
                                        </md-autocomplete>
                                    </div>
                                    <div class="col-md-3">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>GL No</label>
                                            <input ng-model="subtaxdtls.gl_no"
                                                   placeholder="GL No"
                                                   ng-required="true"
                                                   maxlength="16" numbers-only disabled
                                                   type="text"
                                            />
                                        </md-input-container>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="col-md-4">
                                        <md-input-container class="md-block inputcontainer">
                                            <label>Paymode Details Name</label>
                                            <input ng-model="paymode_detail_name"
                                                   ng-required="true" required no-special-char
                                                   maxlength="192"/>
                                        </md-input-container>
                                    </div>

                                </div>
                            </div>
                            <br/>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="col-md-6 text-right">
                                        <md-button class="md-raised custbutton" value="submit"
                                                   ng-click="save_paymode_details()"
                                                   ng-disabled="paymode_details.$invalid">
                                            Save
                                        </md-button>
                                    </div>
                                    <div class="col-md-2">
                                        <md-button class="md-raised md-warn" value="close" data-dismiss="modal"
                                                   aria-label="Close">Cancel
                                        </md-button>
                                    </div>
                                </div>

                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>
{% endverbatim %}
<style>
    md-tabs:not(.md-no-tab-content):not(.md-dynamic-height) {
    min-height: 1000px;
    overflow:auto;
}


.md-select-menu-container.md-active {
  z-index: 1060;
 }
.md-virtual-repeat-container.md-autocomplete-suggestions-container {
     width:10px !important;
}






















</style>
<script>
var myApp = angular.module('commonsummary', ['ngMaterial','ui.bootstrap','AppCommon']).config(function($httpProvider) {
    $httpProvider.defaults.xsrfCookieName = 'csrftoken';
    $httpProvider.defaults.xsrfHeaderName = 'X-CSRFToken';
});

myApp.controller('Ctrlcommon', ['$timeout','$scope','commenservice','$mdDialog', '$rootScope', '$window', '$filter',
    function($timeout, $scope, commenservice,$mdDialog, $rootScope, $window, $filter) {



    $scope.alldetails=[];
    $scope.itemsPerPage=10;
    $scope.data='';
    $scope.isDisabled=true;
    $scope.bank= false;
    $scope.currentPages = 1;
    $scope.maxSizes = 3;
    $scope.itemsPerPages = 10;

  $scope.shwothr= false;
  var detail = JSON.parse(sessionStorage.getItem('today'));
        $scope.employgid = detail.employee_gid;
        $scope.entity_gid = detail.entity_gid;
        $scope.currentPage = 1;
        $scope.maxSize = 3;
        $scope.itemsPerPage = 10;


$scope.editdetail = function(){
debugger;

 var data = {
          "Params":

                  { "Action":"update",
                    "t_name":$scope.summarytype,
                    "t_code":$scope.invnu,
                    "t_tname":$scope.invn,
                    "table_gid":$scope.gid,
                    "update_by":$scope.employgid,
                    }
                    }
              var update_data=commenservice.updatesummory(data)
              update_data.then(function(result){
              if (result.data == 'SUCCESS') {

                if($scope.summarytype == 'bank'){

                    loadbank();
                }
                if($scope.summarytype == 'paymode'){

                    loadpaymode();
                }
                if($scope.summarytype == 'uom'){

                    loaduom();
                }

                if($scope.summarytype == 'designation'){

                    loaddesign();
                }
                if($scope.summarytype == 'dept'){

                    loaddept();
                }

                if($scope.summarytype == 'custcategory'){

                    loadcustcategory();
                }
                if($scope.summarytype == 'contacttype'){

                    loadcontacttype();
                }
                }
 alert("update Succesfully");
              })


}




            function loadcustcategory()
            {
                var data = {
                      "Params":
                              { "Type":"get",
                                 "Sub_Type":"get_data",
                                "t_name":$scope.summarytype
                                }
                            }


                var view_data=commenservice.getprcesmry(data)
                   view_data.then(function(result){
                   debugger
                   $scope.custcategory=result.data;
                     })
            }

$scope.bank_gid=0;
 $scope.Selected_Bank_Name ="";
$scope.getroles = function(e){
    debugger;
    $scope.invnu = e.bank_code;
    $scope.gid = e.bank_gid;
    $scope.bank_gid=e.bank_gid;
    $scope.invn = e.bank_name;
    $scope.Selected_Bank_Name = e.bank_name;
                if(e.bank_gid!=0){
                    var data = {
                          "Params":
                                  { "Type":"get",
                                     "Sub_Type":"get_data",
                                    "t_name":"bankbranch",
                                    "bankid":e.bank_gid
                                    }
                                }


                    var branch_data=commenservice.get_dynamic_summary_data(data)
                       branch_data.then(function(result){
                       $scope.bank_branch_details=result.data;
                       console.log($scope.bank_branch_details)
                       if(result.data.MESSAGE=="ERROR_OCCURED"){
                            alert(JSON.stringify(result.data));
                       }
                         },
                            function(err) {
                                alert(result);
                        }).finally($scope.endloading);
                }


}


$scope.paymodeclick = function(e){
    debugger;
    $scope.currentPages=1;
    $scope.invnu = e.paymode_code;
    $scope.gid = e.paymode_gid;
    $scope.paymode_gid=e.paymode_gid;
    $scope.invn = e.Paymode_name;

    if($scope.gid!=0){
                    var data = {
                          "Params":
                                  { "Type":"get",
                                     "Sub_Type":"get_data",
                                    "t_name":"paymodedetail",
                                    "payid":$scope.gid
                                    }
                                }

                    var get_paymode=commenservice.get_dynamic_summary_data(data)
                       get_paymode.then(function(result){
                       $scope.paymod_details_data=result.data;
                       console.log($scope.paymod_details_data)
                       if(result.data.MESSAGE=="ERROR_OCCURED"){
                            alert(JSON.stringify(result.data));
                       }
                         },
                            function(err) {
                                alert(result);
                        }).finally($scope.endloading);
                }

}

$scope.uomclick = function(e){
debugger;
$scope.invnu = e.uom_code;
$scope.gid = e.uom_gid;
$scope.invn = e.uom_name;
}


$scope.desclick = function(e){

$scope.invnu = e.designation_code;
$scope.gid = e.designation_gid;
$scope.invn = e.designation_name;
}

$scope.deptclick = function(e){

$scope.invnu = e.dept_code;
$scope.gid = e.dept_gid;
$scope.invn = e.dept_name;
}

$scope.custclick = function(e){
debugger;
$scope.invnu = e.custcategory_code;
$scope.gid = e.custcategory_gid;
$scope.invn = e.custcategory_name;
}

$scope.conclick = function(e){
debugger;
$scope.invnu = e.contacttype_code;
$scope.gid = e.contacttype_gid;
$scope.invn = e.contacttype_Name;
}




            function loadcontacttype()
            {
                var data = {
                      "Params":
                              { "Type":"get",
                                 "Sub_Type":"get_data",
                                "t_name":$scope.summarytype
                                }
                            }


                var view_data=commenservice.getprcesmry(data)
                   view_data.then(function(result){
                   $scope.contacttype=result.data;
                     })
            }








            function loaddept()
            {
                var data = {
                      "Params":
                              { "Type":"get",
                                 "Sub_Type":"get_data",
                                "t_name":$scope.summarytype
                                }
                            }


                var view_data=commenservice.getprcesmry(data)
                   view_data.then(function(result){
                   $scope.dept=result.data;
                     })
            }



         function loadbank()
            {
                var data = {
                      "Params":
                              { "Type":"get",
                                 "Sub_Type":"get_data",
                                "t_name":$scope.summarytype
                                }
                            }


                var view_data=commenservice.getprcesmry(data)
                   view_data.then(function(result){
                   $scope.alldetails=result.data;
                     })
            }



            function loaduom()
            {
                var data = {
                      "Params":
                              { "Type":"get",
                                 "Sub_Type":"get_data",
                                "t_name":$scope.summarytype
                                }
                            }


                var view_data=commenservice.getprcesmry(data)
                   view_data.then(function(result){
                   $scope.uom=result.data;
                     })
            }



            function loaddesign()
            {
                var data = {
                      "Params":
                              { "Type":"get",
                                 "Sub_Type":"get_data",
                                "t_name":$scope.summarytype
                                }
                            }


                var view_data=commenservice.getprcesmry(data)
                   view_data.then(function(result){
                   $scope.designation=result.data;
                     })
            }





            function loadpaymode()
            {
                var data = {
                      "Params":
                              { "Type":"get",
                                 "Sub_Type":"get_data",
                                "t_name":$scope.summarytype
                                }
                            }


                var view_data=commenservice.getprcesmry(data)
                   view_data.then(function(result){
                   $scope.others=result.data;
                     })
            }



        $scope.loading = function() {
            $mdDialog.show({
                templateUrl: 'loaderSpinner',
                parent: angular.element(document.body),
                clickOutsideToClose: false
            });
        };
        	$scope.endloading = function() {
					$mdDialog.hide();
				};

        $scope.closedetail=function(){
        $scope.invnum='';
        $scope.invnums='';
        }
        $scope.savedetail=function(){
            if ($scope.invnum == undefined) {
                alert("Fill the Data!.");
                return false;

            }
         debugger;
          var insert_data={
          "Params":

                  { "Action":"insert",
                    "t_name":$scope.summarytype,
                    "t_code":$scope.invnum,
                    "t_tname":$scope.invnums,
                    "entity_gid":$scope.entity_gid,
                    "create_by":$scope.employgid,
                    }

          }
             var custdetail = commenservice.setprcesmry(insert_data);
            custdetail.then(function(result) {
            debugger;
                if (result.data == 'SUCCESS') {

                if($scope.summarytype == 'bank'){

                    loadbank();
                }

                if($scope.summarytype == 'paymode'){

                    loadpaymode();
                }

                if($scope.summarytype == 'uom'){

                    loaduom();
                }

                if($scope.summarytype == 'designation'){

                    loaddesign();
                }

                if($scope.summarytype == 'dept'){

                    loaddept();
                }

                if($scope.summarytype == 'custcategory'){

                    loadcustcategory();
                }
                if($scope.summarytype == 'contacttype'){

                    loadcontacttype();
                }



                    alert("Inserted Succesfully");

                } else {
                    alert("Data Not Inserted");
                }
            }, function(err) {
                alert('Data Not Inserted.');
            })
            $scope.invnum = ''
            $scope.invnums = ''
            //$window.location.href='common_summary';
         }
    $scope.add = function(){
    debugger;
    if ($scope.summarytype == undefined) {
                alert("Fill the Field!.");
                $scope.isDisabled=true;
                return false;
            }

    $scope.isDisabled=false;
    var data = {
          "Params":

                  { "Type":"get",

                   "Sub_Type":"get_data",
                    "t_name":$scope.summarytype
                    }

                }


    if($scope.summarytype == "bank"){
    $scope.bank = true;
    $scope.paymode = false;
    $scope.uom = false;
    $scope.designation = false;
    $scope.dept = false;
    $scope.custcategory = false;
    $scope.contacttype = false;
    loadbank();


    function loadbank()

    {
    var data = {
          "Params":

                  { "Type":"get",

                   "Sub_Type":"get_data",
                    "t_name":$scope.summarytype
                    }

                }


        var view_data=commenservice.getprcesmry(data)
           view_data.then(function(result){
           $scope.alldetails=result.data;
             })
       }
             }

             else if($scope.summarytype == "paymode"){
            $scope.bank = false;
            $scope.paymode = true;
            $scope.uom = false;
            $scope.designation = false;
            $scope.dept = false;
            $scope.custcategory = false;
            $scope.contacttype = false;
            loadpaymode();

               function loadpaymode()
            {
                var data = {
                      "Params":
                              { "Type":"get",
                                 "Sub_Type":"get_data",
                                "t_name":$scope.summarytype
                                }
                            }


                var view_data=commenservice.getprcesmry(data)
                   view_data.then(function(result){
                   $scope.others=result.data;
                     })
            }
             }
             else if($scope.summarytype == "uom"){
            $scope.bank = false;
            $scope.paymode = false;
            $scope.uom = true;
            $scope.designation = false;
            $scope.dept = false;
            $scope.custcategory = false;
            $scope.contacttype = false;
            loaduom();
              function loaduom()
            {
                var data = {
                      "Params":
                              { "Type":"get",
                                 "Sub_Type":"get_data",
                                "t_name":$scope.summarytype
                                }
                            }


                var view_data=commenservice.getprcesmry(data)
                   view_data.then(function(result){
                   $scope.uom=result.data;
                     })
            }
             }
             else if($scope.summarytype == "designation"){
              $scope.bank = false;
              $scope.paymode = false;
              $scope.uom = false;
              $scope.designation =true;
              $scope.dept = false;
              $scope.custcategory = false;
              $scope.contacttype = false;
              loaddesign();
              function loaddesign()
            {
                var data = {
                      "Params":
                              { "Type":"get",
                                 "Sub_Type":"get_data",
                                "t_name":$scope.summarytype
                                }
                            }


                var view_data=commenservice.getprcesmry(data)
                   view_data.then(function(result){
                   $scope.designation=result.data;
                     })
            }

             }
        else if($scope.summarytype == "dept"){
           $scope.bank = false;
              $scope.paymode = false;
              $scope.uom = false;
              $scope.designation = false;
              $scope.dept = true;
              $scope.custcategory = false;
              $scope.contacttype = false;
              loaddept();
               function loaddept()
            {
                var data = {
                      "Params":
                              { "Type":"get",
                                 "Sub_Type":"get_data",
                                "t_name":$scope.summarytype
                                }
                            }


                var view_data=commenservice.getprcesmry(data)
                   view_data.then(function(result){
                   $scope.dept=result.data;
                     })
            }
             }
else if($scope.summarytype == "custcategory"){
             $scope.bank = false;
              $scope.paymode = false;
              $scope.uom = false;
              $scope.designation = false;
              $scope.dept = false;
              $scope.custcategory = true;
              $scope.contacttype = false;
              loadcustcategory();
               function loadcustcategory()
            {
                var data = {
                      "Params":
                              { "Type":"get",
                                 "Sub_Type":"get_data",
                                "t_name":$scope.summarytype
                                }
                            }


                var view_data=commenservice.getprcesmry(data)
                   view_data.then(function(result){
                   $scope.custcategory=result.data;
                     })
            }

             }
else if($scope.summarytype == "contacttype"){
            $scope.bank = false;
              $scope.paymode = false;
              $scope.uom = false;
              $scope.designation = false;
              $scope.dept = false;
              $scope.custcategory = false;
              $scope.contacttype = true;
              loadcontacttype();

               function loadcontacttype()
            {
                var data = {
                      "Params":
                              { "Type":"get",
                                 "Sub_Type":"get_data",
                                "t_name":$scope.summarytype
                                }
                            }


                var view_data=commenservice.getprcesmry(data)
                   view_data.then(function(result){
                   $scope.contacttype=result.data;
                     })
            }

             }
         }



<!--
    $scope.empget=function(a){
    debugger;
        var clientData = {}

                var typeData={
                         Action: 'Insert',
                        Type: 'insert_data',
                        clientData:clientData
                }

        var  getData= commenservice.empget_service(typeData)
            getData.then(function(result) {
            debugger;

            }),
            function(err) {
                alert('no data');
            }
    }
-->


    $scope.empget=function(a){
    debugger;
        var clientData = {}

                var typeData={
                         Action: 'GET',
                        Type: 'get_data',
                        clientData:clientData
                }

        $scope.loading();
        var  getData= commenservice.empget_service(typeData)
            getData.then(function(result) {
            console.log(result);
            debugger;

            }).finally($scope.endloading),
            function(err) {
                alert('no data');
            }
    }


    $scope.branchget=function(a) {
                    debugger;
                    var clientData = {}

                    var typeData = {
                        Action: 'GET',
                        Type: 'get_data',
                        clientData: clientData
                    }
                    $scope.loading();
                    var getData = commenservice.branchget_service(typeData)
                    getData.then(function (result) {
                        console.log(result);
                        debugger;

                    }).finally($scope.endloading),
                        function (err) {
                            alert('no data');
                        };
                }



                $scope.glget=function(a) {
                    debugger;
                    var clientData = {}

                    var typeData = {
                        Action: 'GET',
                        Type: 'get_data',
                        clientData: clientData
                    }
                    $scope.loading();
                    var getData = commenservice.glget_service(typeData)
                    getData.then(function (result) {
                        console.log(result);
                        debugger;

                    }).finally($scope.endloading),
                        function (err) {
                            alert('no data');
                        };
                }



    $scope.create_branch=function(){
        debugger;
        $scope.add=[];
        $scope.add.pincode1="";
        $scope.bankbranch_microcode="";
        $scope.bankbranch_ifsccode="";
        $scope.bankbranch_name="";
        modalshow('create_branch_view');
    }

    $scope.pinchange = function(pincode, type) {
        var pincd = commenservice.getpincodeall(pincode)
        pincd.then(function(result) {
        debugger;
        $scope.pincodedatacheck=result.data
        if (result.data!="[]"){
                if (type == 'address') {
                    var apincde = [];
                    apincde = JSON.parse(result.data);
                    $scope.pincodedatacheck1=apincde
                    $scope.add.addselectedstate = apincde[0].city_state_gid;
                    $scope.state_clk($scope.add.addselectedstate, 'address');
                    $scope.add.addselecteddistrict = apincde[0].pincode_district_gid;
                    $scope.district_clk($scope.add.addselecteddistrict, 'address');
                    $scope.add.addselectedcity = apincde[0].pincode_City_gid;
                    $scope.add.pincode1 = apincde[0].pincode_no;

                }}
                else{
                $scope.add.addselectedcity='';
                $scope.add.addselecteddistrict='';
                $scope.add.addselectedstate='';
                }
            }),
            function() {
                alert('No data!.');
            };
    };
    $scope.state_clk = function(state_gid, type) {
        var distddl = commenservice.getdistddl(state_gid)
        distddl.then(function(result) {
                if (type == 'address') {
                    $scope.adistrictddl = [];
                    $scope.adistrictddl = JSON.parse(result.data);
                } else {
                    $scope.distritddl = [];
                    $scope.distritddl = JSON.parse(result.data);
                }
            }),
            function() {
                alert('No data!.');
            };
    };
    $scope.district_clk = function(district_gid, type) {
        var ctyddl = commenservice.getcityddl(district_gid)
        ctyddl.then(function(result) {
                if (type == 'address') {
                    $scope.acity1 = [];
                    $scope.acity1 = JSON.parse(result.data);
                } else {
                    $scope.city1 = [];
                    $scope.city1 = JSON.parse(result.data);
                }
            }),
            function() {
                alert('No data!.');
            };
    };
    $scope.city_clk = function(city_gid, type) {
        var pincd = commenservice.getpincode(city_gid)
        pincd.then(function(result) {
                if (type == 'address') {
                    var apincde = [];
                    apincde = JSON.parse(result.data);
                    $scope.add.pincode1 = apincde[0].pincode_no;
                } else {
                    var pincde = [];
                    pincde = JSON.parse(result.data);
                    $scope.pcode = pincde[0].pincode_no;
                }
            }),
            function() {
                alert('No data!.');
            };
    };



    var sttddl = commenservice.getstateddl()
       sttddl.then(function(result) {
            $scope.stateddl = [];
            $scope.stateddl = JSON.parse(result.data);
            $scope.locstate = JSON.parse(result.data);

          }),
        function() {
            alert('no data');
        };

    debugger;
    $scope.save_bank_branch=function(){
        debugger;
        $scope.execute=1;
        if($scope.Selected_Bank_Name!=$scope.bank_name){
            var r = confirm("Bank Name is not Matching,  Confirm to Proceed");
            if(r==true){
                var s = confirm("Input Bank Name is Not Matching with Header Bank Name, Are you sure you want to Allow this");
                if(s==true){
                    $scope.execute=1;
                }
                else{
                    $scope.execute=0;
                }
            }
            else {
                $scope.execute=0;
            }
        }
        else{
            $scope.execute=1;
        }
        if($scope.pincodedatacheck1[0].pincode_no!=$scope.add.pincode1){
        alert("Pincode and City Mismatched");
        return false;
        }
        if($scope.execute==1){
            var datas={"action":"INSERT","type":"bankbranch","filter":{"bankbranch_name":$scope.bankbranch_name.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g, ' '),
                     "bankbranch_ifsccode":$scope.bankbranch_ifsccode, "bankbranch_bank_gid":$scope.bank_gid,
                     "bankbranch_microcode": $scope.bankbranch_microcode,
                     "ADDRESS":[{
                                "Address1":$scope.add.addline,
                                "Address2":$scope.add.addline2,
                                "Address3":$scope.add.addline3,
                                "Pincode":$scope.add.pincode1,
                                "District_Gid":$scope.add.addselecteddistrict,
                                "City_Gid":$scope.add.addselectedcity,
                                "State_Gid":$scope.add.addselectedstate}]}}

                    var insert_bank_branch = commenservice.save_bank_branch_detail(datas);
                    insert_bank_branch.then(function(result) {
                        if (result.data.MESSAGE === "SUCCESS") {
                            alert("Succesfully Inserted...");
                            modalhide("create_branch_view");
                        }
                        else {
                            alert(JSON.stringify(result.data));

                        }
                    }, function(err) {
                         alert(JSON.stringify(result.data));
                    });
        }
    }


    $scope.create_paymode_details=function(){
        $scope.paymode_detail_name="";
        $scope.subtaxdtls.category_name="";
        $scope.sub.subcategory_name="";
        modalshow('paymode_view');
    }

    var data = {
            "Table_name": "ap_mst_tcategory",
            "Column_1": "category_gid, category_code, category_no, category_name, category_glno, category_isactive",
            "Column_2": "",
            "Where_Common": "category",
            "Where_Primary": "",
            "Primary_Value": "",
            "Order_by": "gid"
   }

    var patch = {
        Action: "",
        Entity_Gid: $scope.entity_gid,
        data: data
    }

    var getcat = commenservice.getcategory(patch);
        getcat.then(function(result) {
        debugger;
            $scope.category_all = result.data;
            $scope.category_all_copy=$scope.category_all;
            console.log($scope.category_all);
        }, function(err) {
            alert('No data!.');
    }).finally();

    $scope.getCategoryName = Change_Cate_Name;
    function Change_Cate_Name(query) {
       var result = $filter('filter')($scope.category_all, {
       'category_name': query
         });
       return result;
    }

    $scope.CategoryChanged=function(cat_gid){

       $scope.cat_gid=cat_gid;
        var data={"FILTER":{"category_gid":[$scope.cat_gid]}}
        var datam={
                    "Group":"CCBS_MASTER",
                    "Type":"ccbs_category",
                    "Sub_type":"get",
                    "data":data
        }
    var sub_category_get=commenservice.get_subcategory(datam);
         sub_category_get.then(function(result)
         {
          $scope.sub_category_all = result.data;
            $scope.sub_category_all_copy=$scope.category_all;
            console.log($scope.sub_category_all);
        }, function(err) {
            alert('No data!.');
        }).finally($scope.endloading);
    };

    $scope.getSubCategoryName = Change_SubCate_Name;
    function Change_SubCate_Name(query) {
       var result = $filter('filter')($scope.sub_category_all, {
       'subcategory_name': query
         });
       return result;
    }

    $scope.SubCategoryChanged=function(sub_cat_gid,gl_no){
        $scope.sub_cat_gid=sub_cat_gid;
        $scope.subtaxdtls.gl_no=gl_no;
    }
    $scope.paymode_gid=0;
    $scope.save_paymode_details=function(){
        if($scope.paymode_gid!=0){
            var datas={"action":"INSERT","type":"paymode","filter":{"paymode_gid": $scope.paymode_gid,
                    "paymodedetailname": $scope.paymode_detail_name,"paymodedetailgl":$scope.subtaxdtls.gl_no,
                     "paymodedetail_catgid":$scope.cat_gid,"paymodedetail_subcatgid":$scope.sub_cat_gid }}

            var insert_paymode_details = commenservice.save_paymode_detail(datas);
            insert_paymode_details.then(function(result) {
                if (result.data.MESSAGE === "SUCCESS") {
                    alert("Succesfully Inserted...");
                    modalhide("paymode_view");
                }
                else {
                    alert(JSON.stringify(result.data));

                }
            }, function(err) {
                 alert(JSON.stringify(result.data));
            });
        }
        else{
            alert("Invalide Paymode Gid");
        }
    }

    $scope.activeDeactive_click=function(status,gid){
        debugger;
        var final_status="";
        if(status=="N"){
            final_status="Y";
        }
        else if(status=="Y"){
            final_status="N";
        }
        if(final_status!="" && gid!=undefined){
            var datas={"action":"UPDATE","type":"active_inactive_paymode_detail",
            "filter":{"paymodedetails_gid": gid, "paymodedetails_isactive":final_status}}
            var insert_paymode_details = commenservice.save_paymode_detail(datas);
            insert_paymode_details.then(function(result) {
                if (result.data.MESSAGE === "SUCCESS") {
                     modalhide("myModa");
                    alert("Succesfully Updated...");
                }
                else {
                    alert(JSON.stringify(result.data));
                }
            }, function(err) {
                 alert("Not Updated");
            });

        }
        else{
            alert("Gid or Status Missing");
        }

    }

    $scope.checkifsc_fn=function(e){
    debugger;
        var data={
            "Params":{
                "Filter":{
                    "IFSC_Code":e,
                },
                "Group":"IFSC_GROUP",
            }
        }
        $scope.loading();
        var check_ifscv = commenservice.getifsc(data)
        check_ifscv.then(function(result) {
            $scope.bank_name= result.data.Bank_Name;
            $scope.bankbranch_name = result.data.Branch_Name;
            if($scope.bankbranch_name==''){
            alert("Invalid IFSC Code");
            }

            //alert(JSON.stringify($scope.ifsccode_bankname))
        }).finally($scope.endloading)
    }




}]);

myApp.service("commenservice", function($http) {

    this.getifsc = function(partnergroup) {
        var respons = $http.post(Appname + "/atma_ApprovedPartner_Get/", partnergroup);
        return respons;
    }

 this.getprcesmry = function(data) {
        var respons = $http.post(Appname + "/view_summary/", data);
        return respons;
    }

    this.get_dynamic_summary_data = function(data) {
        var respons = $http.post(Appname + "/view_summary_dynamic/", data);
        return respons;
    }

    this.setprcesmry = function(insert_data) {
        var respons = $http.post(Appname + "/insert_summary/", insert_data);
        return respons;
    }
    this.updatesummory = function(data) {
        var respons = $http.post(Appname + "/update_summary/",data);
        return respons;
    }

// Get MasterSync:


        this.empget_service = function (data) {
            debugger;
            var response = $http.get(Appname + "/mastersync_employee_get/", data);
            return response;
        }

        this.branchget_service = function (data) {
            debugger;
            var response = $http.get(Appname + "/mastersync_branch_get/", data);
            return response;
        }
        this.glget_service = function (data) {
            debugger;
            var response = $http.get(Appname + "/mastersync_gl_get/", data);
            return response;
        }



        this.getpincodeall = function(pincode) {
        var response = $http.get(Appname + "/allpinget/", {
            params: {
                "pincode": pincode
            }
        });
        return response;
    }

    this.getdistddl = function(state_gid) {
        var response = $http.get(Appname + "/districtddl/", {
            params: {
                "state_gid": state_gid
            }
        });
        return response;
    }

    this.getcityddl = function(district_gid) {
        var response = $http.get(Appname + "/cityddl/", {
            params: {
                "district_gid": district_gid
            }
        });
        return response;
    }

    this.getpincode = function(city_gid) {
        var response = $http.get(Appname + "/pincode/", {
            params: {
                "city_gid": city_gid
            }
        });
        return response;
    }

    this.getstateddl = function(d) {
        var response = $http.get(Appname + "/stateddl/");
        return response;
    }


    this.save_bank_branch_detail = function(data) {
        var response = $http.post(Appname + "/insert_bank_branch/", data);
        return response;
    }

    this.save_paymode_detail = function(data) {
        var response = $http.post(Appname + "/insert_paymode_details/", data);
        return response;
    }

    this.getcategory = function(patch){
        var respons = $http.post(Appname + "/get_tablevalue/", patch);
        return respons;
    }

    this.get_subcategory = function(patch){
        var respons = $http.post(Appname + "/get_subcate_data/", patch);
        return respons;
    }


 });




































</script>
{% endblock %}



